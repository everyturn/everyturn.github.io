(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+b4j":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};e.registerSerializer=function(t,e){r[t]=e},e.getSerializer=function(t){return r[t]}},"/F7G":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("CnUt"),i=n("5UGa"),o=function(){function t(){this.types={},this.schemas=new Map}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t){t._typeid=this.schemas.size,this.types[t._typeid]=t,this.schemas.set(t,t._typeid)},t}();e.Context=o,e.globalContext=new o,e.type=function(t,n){return void 0===n&&(n=e.globalContext),function(e,o){var a=e.constructor;a._context=n,n.has(a)||(n.add(a),a._schema=Object.assign({},a._schema||{}),a._indexes=Object.assign({},a._indexes||{}),a._descriptors=Object.assign({},a._descriptors||{})),a._indexes[o]=Object.keys(a._schema).length,a._schema[o]=t;var l=Array.isArray(t),s=!l&&t.map,u="_"+o;a._descriptors[u]={enumerable:!1,configurable:!1,writable:!0},a._descriptors[o]={get:function(){return this[u]},set:function(t){if((l||s)&&(t=new Proxy(t,{get:function(t,e){return t[e]},set:function(t,e,n){if("length"!==e&&0!==e.indexOf("$")){var o=l?Number(e):String(e);if(!t.$sorting){var a=t.$changes.getIndex(n);void 0!==a&&t.$changes.mapIndexChange(n,a),t.$changes.mapIndex(n,o)}n instanceof i.Schema?n.$changes.parent||(n.$changes=new r.ChangeTree(o,t.$changes),n.$changes.changeAll(n)):t[e]=n,t.$changes.change(o)}return t[e]=n,!0},deleteProperty:function(t,e){delete t[e];var n=l?Number(e):String(e);return t.$changes.change(n,!0),!0}})),t!==this[u])if(this[u]=t,Array.isArray(a._schema[o])){this.$changes.change(o),t.$changes=new r.ChangeTree(o,this.$changes);for(var e=0;e<t.length;e++)t[e]instanceof i.Schema&&(t[e].$changes=new r.ChangeTree(e,t.$changes),t[e].$changes.changeAll(t[e])),t.$changes.mapIndex(t[e],e),t.$changes.change(e)}else if(a._schema[o].map)for(var n in t.$changes=new r.ChangeTree(o,this.$changes),this.$changes.change(o),t)t[n]instanceof i.Schema&&(t[n].$changes=new r.ChangeTree(n,t.$changes),t[n].$changes.changeAll(t[n])),t.$changes.mapIndex(t[n],n),t.$changes.change(n);else"function"==typeof a._schema[o]?(this.$changes.change(o),t&&(t.$changes=new r.ChangeTree(o,this.$changes),t.$changes.changeAll(t))):this.$changes.change(o)},enumerable:!0,configurable:!0}}},e.filter=function(t){return function(e,n){var r=e.constructor;r._filters||(r._filters={}),r._filters[n]=t}}},"0Grr":function(t,e,n){!function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e;var f=[{fnWrap:function(t){return e(t)}}],p=function(t,e){var n=[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.fnWrap}).reduce(function(t,n){return(0,n.fnWrap)(t,e)},t);return function(t,r){t=function(t,e){return[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.G}).filter(function(t){return void 0!==t.G.preMove}).forEach(function(n){t=n.G.preMove(t,e)}),t}(t,e),r=function(t,e){return[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.ctx}).filter(function(t){return void 0!==t.ctx.preMove}).forEach(function(n){t=n.ctx.preMove(t,e)}),t}(r,e);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return function(t,e){return[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.G}).filter(function(t){return void 0!==t.G.postMove}).forEach(function(n){t=n.G.postMove(t,e)}),t}(t=n.apply(void 0,[t,r].concat(o)),e)}},h={setup:function(t,e,n){return[].concat(f,c(n.plugins)).filter(function(t){return void 0!==t.G}).filter(function(t){return void 0!==t.G.setup}).forEach(function(r){t=r.G.setup(t,e,n)}),t},onPhaseBegin:function(t,e,n){return[].concat(f,c(n.plugins)).filter(function(t){return void 0!==t.G}).filter(function(t){return void 0!==t.G.onPhaseBegin}).forEach(function(r){t=r.G.onPhaseBegin(t,e,n)}),t}},d={setup:function(t,e){return[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.ctx}).filter(function(t){return void 0!==t.ctx.setup}).forEach(function(n){t=n.ctx.setup(t,e)}),t},onPhaseBegin:function(t,e){return[].concat(f,c(e.plugins)).filter(function(t){return void 0!==t.ctx}).filter(function(t){return void 0!==t.ctx.onPhaseBegin}).forEach(function(n){t=n.ctx.onPhaseBegin(t,e)}),t}},m=function(){};function y(t){m("ERROR:",t)}function b(t,e){return s({},t,{ctx:v(t.G,t.ctx,e)})}function v(t,e,n){var r=[];return n.value&&(r=n.value(t,e)),n.all&&(r=c(e.playOrder)),n.others&&(r=c(e.playOrder).filter(function(t){return t!==e.currentPlayer})),Array.isArray(n)&&(r=n),s({},e,{actionPlayers:r,_actionPlayersOnce:n.once||!1})}function g(t,e){return t[e]+""}function w(t,e,n){var r=c(new Array(e.numPlayers)).map(function(t,e){return e+""});void 0!==n.playOrder&&(r=n.playOrder(t,e));var i=n.first(t,e),o=g(r,i);return e=void 0!==n.actionPlayers?v(t,e,n.actionPlayers):s({},e,{actionPlayers:[o]}),s({},e,{currentPlayer:o,playOrderPos:i,playOrder:r})}var x={DEFAULT:{first:function(t,e){return e.playOrderPos},next:function(t,e){return(e.playOrderPos+1)%e.playOrder.length}},ONCE:{first:function(){return 0},next:function(t,e){if(e.playOrderPos<e.playOrder.length-1)return e.playOrderPos+1}},ANY:{first:function(t,e){return e.playOrderPos},next:function(t,e){return e.playOrderPos},actionPlayers:{all:!0}},ANY_ONCE:{first:function(t,e){return e.playOrderPos},next:function(t,e){return e.playOrderPos},actionPlayers:{all:!0,once:!0},endPhaseOnceDone:!0},OTHERS:{first:function(t,e){return e.playOrderPos},next:function(t,e){return e.playOrderPos},actionPlayers:{others:!0}},OTHERS_ONCE:{first:function(t,e){return e.playOrderPos},next:function(t,e){return e.playOrderPos},actionPlayers:{others:!0,once:!0},endPhaseOnceDone:!0},CUSTOM:function(t){return{playOrder:function(){return t},first:function(){return 0},next:function(t,e){return(e.playOrderPos+1)%e.playOrder.length}}},CUSTOM_FROM:function(t){return{playOrder:function(e){return e[t]},first:function(){return 0},next:function(t,e){return(e.playOrderPos+1)%e.playOrder.length}}},SKIP:{first:function(t,e){return e.playOrderPos},next:function(t,e){if(!t.allPassed)for(var n=e.playOrderPos,r=0;r<e.playOrder.length;r++)if(!t.passOrder.includes(e.playOrder[n=(n+1)%e.playOrder.length]+""))return n}}},_=function(t,e,n,r){return{type:"GAME_EVENT",payload:{type:t,args:e,playerID:n,credentials:r},automatic:!0}};function O(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function I(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function k(t,e){var n=new O(t),i=e&&e.state,o=n.next;return o.quick=o,i&&("object"==r(i)&&I(i,n),o.state=function(){return I(n,{})}),o}var C=function(){function t(e){i(this,t),this.state=e._random||{seed:"0"}}return a(t,[{key:"update",value:function(t){var e=s({},t.ctx,{_random:this.state});return s({},t,{ctx:e})}},{key:"attach",value:function(t){return s({},t,{random:this._api()})}},{key:"_random",value:function(){var t,e=this.state,n=(t=void 0===e.prngstate?new k(e.seed,{state:!0}):new k("",{state:e.prngstate}))();return this.state=s({},e,{prngstate:t.state()}),n}},{key:"_api",value:function(){var t=this._random.bind(this),e={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={},r=function(r){var i=e[r];n[r]=function(e){return void 0===e?Math.floor(t()*i)+1:c(new Array(e).keys()).map(function(){return Math.floor(t()*i)+1})}};for(var i in e)r(i);return s({},n,{Die:function(e,n){return void 0===e&&(e=6),void 0===n?Math.floor(t()*e)+1:c(new Array(n).keys()).map(function(){return Math.floor(t()*e)+1})},Number:function(){return t()},Shuffle:function(e){for(var n=e.slice(0),r=e.length,i=0,o=new Array(r);r;){var a=r*t()|0;o[i++]=n[a],n[a]=n[--r]}return o}})}}]),t}();C.detach=function(t){return u(t,["random"])},C.seed=function(){return(+new Date).toString(36).slice(-10)};var S=function(){function t(e,n){i(this,t),this.flow=e,this.playerID=n,this.dispatch=[]}return a(t,[{key:"attach",value:function(t){var e=this,n={},r=!0,i=!1,o=void 0;try{for(var a,l=function(){var t=a.value;n[t]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.dispatch.push({key:t,args:r})}},u=this.flow.eventNames[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)l()}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return s({},t,{events:n})}},{key:"update",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.dispatch[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,l=_(a.key,a.args,this.playerID);t=s({},t,this.flow.processGameEvent(t,l))}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}}]),t}();S.detach=function(t){return u(t,["events"])};var P=function(){function t(){i(this,t),this._payload=void 0}return a(t,[{key:"_api",value:function(){var t=this;return{setPayload:function(e){t._payload=e}}}},{key:"attach",value:function(t){return s({},t,{log:this._api()})}},{key:"update",value:function(t){if(void 0===this._payload)return t;var e=t.deltalog;return e[e.length-1]=s({},e[e.length-1],{payload:this._payload}),this._payload=void 0,s({},t,{deltalog:e})}}],[{key:"detach",value:function(t){return u(t,["log"])}}]),t}(),A=function(){function t(e,n,r){i(this,t),this.random=new C(e),this.events=new S(n.flow,r),this.log=new P}return a(t,[{key:"attachToContext",value:function(t){var e=this.random.attach(t);return e=this.events.attach(e),this.log.attach(e)}},{key:"_update",value:function(t,e){var n=e?this.events.update(t):t;return n=this.random.update(n),this.log.update(n)}},{key:"updateAndDetach",value:function(e,n){var r=this._update(e,n);return r.ctx=t.detachAllFromContext(r.ctx),r}}],[{key:"detachAllFromContext",value:function(t){var e=C.detach(t);return e=S.detach(e),P.detach(e)}}]),t}();function D(t){var e=t.ctx,n=t.events,r=t.enabledEvents,i=t.init,o=t.processMove,a=t.optimisticUpdate,l=t.canMakeMove,u=t.canUndoMove;e||(e=function(){return{}}),n||(n={}),r||(r={}),i||(i=function(t){return t}),o||(o=function(t){return t}),l||(l=function(){return!0}),u||(u=function(){return!0}),void 0===a&&(a=function(){return!0});var f=function t(e,r){var i=r.payload;if(n.hasOwnProperty(i.type)){var o={playerID:i.playerID,dispatch:t},a={action:r,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},l=[e=s({},e,{deltalog:[].concat(c(e.deltalog||[]),[a])})].concat(i.args);return n[i.type].apply(o,l)}return e};return{ctx:e,init:i,canUndoMove:u,redactedMoves:t.redactedMoves,eventNames:Object.getOwnPropertyNames(n),enabledEventNames:Object.getOwnPropertyNames(r),processMove:function(t,e){return o(t,e,f)},processGameEvent:function(t,e){return f(t,e)},optimisticUpdate:a,canPlayerCallEvent:function(t,e,n){return e.currentPlayer==n&&e.actionPlayers.includes(n)},canPlayerMakeMove:function(t,e,n){return(e.actionPlayers||[]).includes(n)},canMakeMove:function(t,e,n){return void 0===e.gameover&&l(t,e,n)}}}function E(t){var e=t.phases,n=t.startingPhase,r=t.movesPerTurn,i=t.endTurnIf,o=t.endGameIf,a=t.onTurnBegin,u=t.onTurnEnd,f=t.onMove,m=t.turnOrder,v=t.endTurn,O=t.endPhase,I=t.endGame,k=t.setActionPlayers,C=t.undoableMoves,S=t.allowedMoves,P=t.redactedMoves,E=t.optimisticUpdate,j=t.game;void 0===O&&e&&(O=!0),void 0===v&&(v=!0),void 0===I&&(I=!1),void 0===k&&(k=!1),void 0===E&&(E=function(){return!0}),void 0===j&&(j={plugins:[]}),e||(e={}),n||(n="default"),i||(i=function(){return!1}),o||(o=function(){}),a||(a=function(t){return t}),u||(u=function(t){return t}),f||(f=function(t){return t}),m||(m=x.DEFAULT),void 0===S&&(S=null),void 0===C&&(C=null);var M=e;for(var N in"default"in M&&y('cannot specify phase with name "default"'),M.default={},M){var R=M[N];void 0===R.endPhaseIf&&(R.endPhaseIf=function(){}),void 0===R.onPhaseBegin&&(R.onPhaseBegin=function(t){return t}),R.onPhaseBegin=p(R.onPhaseBegin,j),void 0===R.onPhaseEnd&&(R.onPhaseEnd=function(t){return t}),R.onPhaseEnd=p(R.onPhaseEnd,j),void 0===R.movesPerTurn&&(R.movesPerTurn=r),void 0===R.endTurnIf&&(R.endTurnIf=i),void 0===R.endGameIf&&(R.endGameIf=o),void 0===R.onTurnBegin&&(R.onTurnBegin=a),R.onTurnBegin=p(R.onTurnBegin,j),void 0===R.onTurnEnd&&(R.onTurnEnd=u),R.onTurnEnd=p(R.onTurnEnd,j),void 0===R.onMove&&(R.onMove=f),R.onMove=p(R.onMove,j),void 0===R.turnOrder&&(R.turnOrder=m),void 0===R.undoableMoves&&(R.undoableMoves=C),void 0===R.allowedMoves&&(R.allowedMoves=S),"function"!=typeof R.allowedMoves&&function(){var t=R.allowedMoves;R.allowedMoves=function(){return t}}()}var G=function(t){var e=t.ctx;return M[e.phase].endPhaseIf(t.G,e)},T=function(t){var e=t.ctx,n=M[e.phase];return!!(n.movesPerTurn&&(e.stats.turn.numMoves[e.currentPlayer]||0)>=n.movesPerTurn)||n.endTurnIf(t.G,e)},L=function(t,e){var n=e.onPhaseBegin(t.G,t.ctx),r=w(n,t.ctx,e.turnOrder);return n=h.onPhaseBegin(n,r,j),(r=d.onPhaseBegin(r,j)).stats=s({},r.stats,{phase:s({},r.stats.phase,{numMoves:{},allPlayed:!1})}),s({},t,{G:n,ctx:s({},r,{allowedMoves:e.allowedMoves(n,r)})})},z=function(t,e){var n=e.onTurnBegin(t.G,t.ctx),r=[{G:n,ctx:A.detachAllFromContext(t.ctx)}],i=s({},t.ctx);return i.allowedMoves=e.allowedMoves(n,i),i.stats=s({},i.stats,{turn:s({},i.stats.turn,{numMoves:{},allPlayed:!1})}),s({},t,{G:n,ctx:i,_undo:r,_redo:[]})};function F(t,e,n){var r=s({},t.ctx.stats[e].numMoves,l({},n,(t.ctx.stats[e].numMoves[n]||0)+1)),i=s({},t.ctx.stats[e],{numMoves:r});Object.keys(r).length==t.ctx.numPlayers&&(i.allPlayed=!0);var o=s({},t.ctx.stats,l({},e,i)),a=s({},t.ctx,{stats:o});return s({},t,{ctx:a})}var q={endTurn:function(t,e){var n=t.G,r=t.ctx,i=M[r.phase];if(i.movesPerTurn&&(r.stats.turn.numMoves[r.currentPlayer]||0)<i.movesPerTurn)return t;n=i.onTurnEnd(n,r);var o=i.endGameIf(n,r);if(void 0!==o)return s({},t,{G:n,ctx:s({},r,{gameover:o})});var a=!1,l=function(t,e,n,r){var i=e.playOrderPos,o=e.currentPlayer,a=e.actionPlayers,l=!1;if(r&&!0!==r)e.playOrder.includes(r.next)?(i=e.playOrder.indexOf(r.next),a=[o=r.next]):y("invalid argument to endTurn: ".concat(r));else{var u=n.next(t,e);void 0===u?l=!0:(o=g(e.playOrder,i=u),void 0===n.actionPlayers&&(a=[o]))}return{endPhase:l,ctx:e=s({},e,{playOrderPos:i,currentPlayer:o,actionPlayers:a})}}(n,r,i.turnOrder,e);a=l.endPhase,r=s({},r=l.ctx,{turn:r.turn+1}),t=s({},t,{G:n,ctx:r});var u=G(t);return u&&(a=!0),a?this.dispatch(t,_("endPhase",[u],this.playerID)):z(t,i)},endPhase:function(t,e,n){var r=t.G,i=t.ctx,o=M[i.phase];r=o.onPhaseEnd(r,i);var a=o.endGameIf(r,i);if(void 0!==a)return s({},t,{G:r,ctx:s({},i,{gameover:a})});var l=i.phase;e&&!0!==e?e.next in M?i=s({},i,{phase:e.next,prevPhase:l}):y("invalid argument to endPhase: "+e):i=s({},i,void 0!==o.next?{phase:o.next,prevPhase:l}:{phase:i.prevPhase,prevPhase:l});var u=(t=L(s({},t,{G:r,ctx:i}),M[i.phase])).ctx.turn;if(n||(n={}),i.phase in n)t=this.dispatch(t,_("endPhase",[{next:"default"},n],this.playerID));else{n[i.phase]=!0;var c=G(t);c&&(t=this.dispatch(t,_("endPhase",[c,n],this.playerID)))}var f=T(t);return f&&t.ctx.turn==u&&(t=this.dispatch(t,_("endTurn",[f],this.playerID))),t},endGame:function(t,e){return void 0===e&&(e=!0),s({},t,{ctx:s({},t.ctx,{gameover:e})})},setActionPlayers:b},U={};return v&&(U.endTurn=!0),O&&(U.endPhase=!0),I&&(U.endGame=!0),k&&(U.setActionPlayers=!0),D({ctx:function(t){return{numPlayers:t,turn:0,currentPlayer:"0",actionPlayers:["0"],currentPlayerMoves:0,playOrder:c(new Array(t)).map(function(t,e){return e+""}),playOrderPos:0,stats:{turn:{numMoves:{}},phase:{numMoves:{}}},allPlayed:!1,phase:n,prevPhase:"default"}},init:function(t){return function(t){if(!(t.ctx.phase in M))return y("invalid startingPhase: "+t.ctx.phase),t;var e=M[t.ctx.phase];return t=L(t,e),z(t,e)}(t)},optimisticUpdate:function(t,e,n){return(void 0===e._random||void 0===e._random.prngstate)&&E(t,e,n)},events:q,enabledEvents:U,processMove:function(t,e,n){var r=M[t.ctx.phase];t=F(t,"turn",e.playerID);var i=(t=F(t,"phase",e.playerID)).ctx.actionPlayers,o=!1;if(t.ctx._actionPlayersOnce){var a=e.playerID;0==(i=i.filter(function(t){return t!==a})).length&&r.turnOrder.endPhaseOnceDone&&(o=!0)}t=s({},t,{ctx:s({},t.ctx,{actionPlayers:i})});var l=(t=s({},t,{G:r.onMove(t.G,t.ctx,e)})).ctx.turn,u=r.endGameIf(t.G,t.ctx),f=G(t)||o;(f||void 0!==u)&&(t=n(t,_("endPhase",[f],e.playerID)),r=M[t.ctx.phase]);var p=T(t);if(t.ctx.turn!=l||!p&&void 0===u||(t=n(t,_("endTurn",[p],e.playerID))),void 0!==u)return s({},t,{ctx:s({},t.ctx,{gameover:u})});var h=r.allowedMoves(t.G,t.ctx);if(t=s({},t,{ctx:s({},t.ctx,{allowedMoves:h})}),!p){var d=t._undo||[],m=e.type,y=A.detachAllFromContext(t.ctx);t=s({},t,{_undo:[].concat(c(d),[{G:t.G,ctx:y,moveType:m}]),_redo:[]})}return t},canMakeMove:function(t,e,n){var r=M[e.phase].allowedMoves(t,e);return!r||r.includes(n)},canUndoMove:function(t,e,n){var r=M[e.phase];return!r.undoableMoves||r.undoableMoves.includes(n)},redactedMoves:P})}var j={STRIP_SECRETS:function(t,e,n){var r=s({},t);return void 0!==r.secret&&delete r.secret,r.players&&(r.players=l({},n,r.players[n])),r}};t.Game=function(t){return void 0===t.name&&(t.name="default"),void 0===t.setup&&(t.setup=function(){return{}}),void 0===t.moves&&(t.moves={}),void 0===t.playerView&&(t.playerView=function(t){return t}),void 0===t.plugins&&(t.plugins=[]),t.flow&&void 0!==t.flow.processGameEvent||(t.flow=E(s({game:t},t.flow))),s({},t,{moveNames:Object.getOwnPropertyNames(t.moves),processMove:function(e,n,r){if(t.moves.hasOwnProperty(n.type)){var i=[e,s({},r,{playerID:n.playerID})].concat(n.args);return p(t.moves[n.type],t).apply(void 0,c(i))}return e}})},t.InitializeGame=function(t){var e=t.game,r=t.numPlayers,i=t.setupData;r||(r=2);var o=e.flow.ctx(r),a=e.seed;void 0===a&&(a=C.seed()),o._random={seed:a},o=d.setup(o,e);var l=new A(o,e,o.currentPlayer),s=l.attachToContext(o),u=e.setup(s,i),c={G:u=h.setup(u,s,e),ctx:o,_undo:[],_redo:[],_stateID:0,_initial:{}},f=e.flow.init({G:c.G,ctx:s});return c.G=f.G,c._undo=f._undo,f=l.updateAndDetach(f,!0),c.ctx=f.ctx,c._initial=n.parse(n.stringify(c)),c},t.CreateGameReducer=function(t){var e=t.game,n=t.multiplayer;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"GAME_EVENT":if(t=s({},t,{deltalog:[]}),n)return t;if(null!=r.payload.playerID&&!e.flow.canPlayerCallEvent(t.G,t.ctx,r.payload.playerID))return t;var i=new A(t.ctx,e,r.payload.playerID);t.ctx=i.attachToContext(t.ctx);var o=e.flow.processGameEvent(t,r);return s({},o=i.updateAndDetach(o,!0),{_stateID:t._stateID+1});case"MAKE_MOVE":if(t=s({},t,{deltalog:[]}),!e.moveNames.includes(r.payload.type))return t;if(!e.flow.canMakeMove(t.G,t.ctx,r.payload.type))return t;if(null!=r.payload.playerID&&!e.flow.canPlayerMakeMove(t.G,t.ctx,r.payload.playerID))return t;var a=new A(t.ctx,e,r.payload.playerID),l=a.attachToContext(t.ctx),u=e.processMove(t.G,r.payload,l);if("INVALID_MOVE"===u)return t;var f=a.updateAndDetach(s({},t,{deltalog:[{action:r,_stateID:t._stateID,turn:t.ctx.turn,phase:t.ctx.phase}]}),!1),p=f.ctx;return n&&!e.flow.optimisticUpdate(u,p,r.payload)&&(u=t.G),t=s({},f,{G:u,ctx:p,_stateID:t._stateID+1}),n?t:(l=a.attachToContext(t.ctx),t=e.flow.processMove(s({},t,{ctx:l}),r.payload),(t=a.updateAndDetach(t,!0))._undo[t._undo.length-1].ctx=t.ctx,t);case"RESET":case"UPDATE":case"SYNC":return r.state;case"UNDO":var h=t._undo,d=t._redo;if(h.length<2)return t;var m=h[h.length-1],y=h[h.length-2];return e.flow.canUndoMove(t.G,t.ctx,m.moveType)?s({},t,{G:y.G,ctx:y.ctx,_undo:h.slice(0,h.length-1),_redo:[m].concat(c(d))}):t;case"REDO":var b=t._redo;if(0==b.length)return t;var v=b[0];return s({},t,{G:v.G,ctx:v.ctx,_undo:[].concat(c(t._undo),[v]),_redo:b.slice(1)});default:return t}}},t.Flow=D,t.FlowWithPhases=E,t.TurnOrder=x,t.Pass=function(t,e){var n=[];void 0!==t.passOrder&&(n=t.passOrder);var r=e.playerID;return t=s({},t,{passOrder:n=[].concat(c(n),[r])}),n.length>=e.numPlayers&&(t=s({},t,{allPassed:!0})),t},t.PlayerView=j,t.INVALID_MOVE="INVALID_MOVE",Object.defineProperty(t,"__esModule",{value:!0})}(e,n("V/h/"),n("W8Xk"))},"0jZk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Tk29");function i(t,e){return o(t,e)<<24>>24}function o(t,e){return t[e.offset++]}function a(t,e){return l(t,e)<<16>>16}function l(t,e){return t[e.offset++]|t[e.offset++]<<8}function s(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function u(t,e){return s(t,e)>>>0}function c(t,e){var n=u(t,e);return s(t,e)*Math.pow(2,32)+n}function f(t,e){var n=u(t,e);return u(t,e)*Math.pow(2,32)+n}e.int8=i,e.uint8=o,e.int16=a,e.uint16=l,e.int32=s,e.uint32=u,e.float32=function(t,e){return y(t,e)},e.float64=function(t,e){return b(t,e)},e.int64=c,e.uint64=f;var p=!0,h=new Int32Array(2),d=new Float32Array(h.buffer),m=new Float64Array(h.buffer);function y(t,e){return h[0]=s(t,e),d[0]}function b(t,e){return h[p?0:1]=s(t,e),h[p?1:0]=s(t,e),m[0]}e.readFloat32=y,e.readFloat64=b,e.boolean=function(t,e){return o(t,e)>0},e.string=function(t,e){var n,r=t[e.offset++];r<192?n=31&r:217===r?n=o(t,e):218===r?n=l(t,e):219===r&&(n=u(t,e));var i=function(t,e,n){for(var r="",i=0,o=e,a=e+n;o<a;o++){var l=t[o];if(0!=(128&l))if(192!=(224&l))if(224!=(240&l)){if(240!=(248&l))throw new Error("Invalid byte "+l.toString(16));(i=(7&l)<<18|(63&t[++o])<<12|(63&t[++o])<<6|(63&t[++o])<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&l)<<12|(63&t[++o])<<6|(63&t[++o])<<0);else r+=String.fromCharCode((31&l)<<6|63&t[++o]);else r+=String.fromCharCode(l)}return r}(t,e.offset,n);return e.offset+=n,i},e.stringCheck=function(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n},e.number=function(t,e){var n=t[e.offset++];return n<128?n:202===n?y(t,e):203===n?b(t,e):204===n?o(t,e):205===n?l(t,e):206===n?u(t,e):207===n?f(t,e):208===n?i(t,e):209===n?a(t,e):210===n?s(t,e):211===n?c(t,e):n>223?-1*(255-n+1):void 0},e.numberCheck=function(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211},e.arrayCheck=function(t,e){return t[e.offset]<160},e.nilCheck=function(t,e){return t[e.offset]===r.NIL},e.indexChangeCheck=function(t,e){return t[e.offset]===r.INDEX_CHANGE}},"1mXj":function(t,e,n){!function(t){"use strict";function e(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function n(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function r(t,e,n){r.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(t,e){i.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function o(t,e){o.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function a(t,e,n){a.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function s(t){var e=void 0===t?"undefined":x(t);return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function u(t,e,n,c,f,p,h){h=h||[];var d=(f=f||[]).slice(0);if(void 0!==p){if(c){if("function"==typeof c&&c(d,p))return;if("object"===(void 0===c?"undefined":x(c))){if(c.prefilter&&c.prefilter(d,p))return;if(c.normalize){var m=c.normalize(d,p,t,e);m&&(t=m[0],e=m[1])}}}d.push(p)}"regexp"===s(t)&&"regexp"===s(e)&&(t=t.toString(),e=e.toString());var y=void 0===t?"undefined":x(t),b=void 0===e?"undefined":x(e),v="undefined"!==y||h&&h[h.length-1].lhs&&h[h.length-1].lhs.hasOwnProperty(p),g="undefined"!==b||h&&h[h.length-1].rhs&&h[h.length-1].rhs.hasOwnProperty(p);if(!v&&g)n(new i(d,e));else if(!g&&v)n(new o(d,t));else if(s(t)!==s(e))n(new r(d,t,e));else if("date"===s(t)&&t-e!=0)n(new r(d,t,e));else if("object"===y&&null!==t&&null!==e)if(h.filter(function(e){return e.lhs===t}).length)t!==e&&n(new r(d,t,e));else{if(h.push({lhs:t,rhs:e}),Array.isArray(t)){var w;for(w=0;w<t.length;w++)w>=e.length?n(new a(d,w,new o(void 0,t[w]))):u(t[w],e[w],n,c,d,w,h);for(;w<e.length;)n(new a(d,w,new i(void 0,e[w++])))}else{var _=Object.keys(t),O=Object.keys(e);_.forEach(function(r,i){var o=O.indexOf(r);o>=0?(u(t[r],e[r],n,c,d,r,h),O=l(O,o)):u(t[r],void 0,n,c,d,r,h)}),O.forEach(function(t){u(void 0,e[t],n,c,d,t,h)})}h.length=h.length-1}else t!==e&&("number"===y&&isNaN(t)&&isNaN(e)||n(new r(d,t,e)))}function c(t,e,n,r){return r=r||[],u(t,e,function(t){t&&r.push(t)},n),r.length?r:void 0}function f(t,e,n){if(t&&e&&n&&n.kind){for(var r=t,i=-1,o=n.path?n.path.length-1:0;++i<o;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":e=l(e,n);break;case"E":case"N":e[n]=r.rhs}return e}(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(t){return"color: "+I[t].color+"; font-weight: bold"}function h(t,e,n,r){var i=c(t,e);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(t){n.log("diff")}i?i.forEach(function(t){var e=t.kind,r=function(t){var e=t.path,n=t.lhs,r=t.rhs,i=t.index,o=t.item;switch(t.kind){case"E":return[e.join("."),n,"\u2192",r];case"N":return[e.join("."),r];case"D":return[e.join(".")];case"A":return[e.join(".")+"["+i+"]",o];default:return[]}}(t);n.log.apply(n,["%c "+I[e].text,p(e)].concat(_(r)))}):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(t){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function d(t,e,n,r){switch(void 0===t?"undefined":x(t)){case"object":return"function"==typeof t[r]?t[r].apply(t,_(n)):t[r];case"function":return t(e);default:return t}}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},k,t),n=e.stateTransformer,r=e.errorTransformer,i=e.predicate,o=e.logErrors,a=e.diffPredicate;if(void 0===e.logger)return function(){return function(t){return function(e){return t(e)}}};if(t.getState&&t.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var l=[];return function(t){var s=t.getState;return function(t){return function(u){if("function"==typeof i&&!i(s,u))return t(u);var c={};l.push(c),c.started=w.now(),c.startedTime=new Date,c.prevState=n(s()),c.action=u;var f=void 0;if(o)try{f=t(u)}catch(t){c.error=r(t)}else f=t(u);c.took=w.now()-c.started,c.nextState=n(s());var p=e.diff&&"function"==typeof a?a(s,u):e.diff;if(function(t,e){var n=e.logger,r=e.actionTransformer,i=e.titleFormatter,o=void 0===i?function(t){var e=t.timestamp,n=t.duration;return function(t,r,i){var o=["action"];return o.push("%c"+String(t.type)),e&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}(e):i,a=e.collapsed,l=e.colors,s=e.level,u=e.diff,c=void 0===e.titleFormatter;t.forEach(function(i,f){var p=i.startedTime,m=i.action,y=i.prevState,b=i.error,v=i.took,w=i.nextState,x=t[f+1];x&&(w=x.prevState,v=x.started-i.started);var _=r(m),O="function"==typeof a?a(function(){return w},m,i):a,I=g(p),k=l.title?"color: "+l.title(_)+";":"",C=["color: gray; font-weight: lighter;"];C.push(k),e.timestamp&&C.push("color: gray; font-weight: lighter;"),e.duration&&C.push("color: gray; font-weight: lighter;");var S=o(_,I,v);try{O?l.title&&c?n.groupCollapsed.apply(n,["%c "+S].concat(C)):n.groupCollapsed(S):l.title&&c?n.group.apply(n,["%c "+S].concat(C)):n.group(S)}catch(t){n.log(S)}var P=d(s,_,[y],"prevState"),A=d(s,_,[_],"action"),D=d(s,_,[b,y],"error"),E=d(s,_,[w],"nextState");if(P)if(l.prevState){var j="color: "+l.prevState(y)+"; font-weight: bold";n[P]("%c prev state",j,y)}else n[P]("prev state",y);if(A)if(l.action){var M="color: "+l.action(_)+"; font-weight: bold";n[A]("%c action    ",M,_)}else n[A]("action    ",_);if(b&&D)if(l.error){var N="color: "+l.error(b,y)+"; font-weight: bold;";n[D]("%c error     ",N,b)}else n[D]("error     ",b);if(E)if(l.nextState){var R="color: "+l.nextState(w)+"; font-weight: bold";n[E]("%c next state",R,w)}else n[E]("next state",w);u&&h(y,w,n,O);try{n.groupEnd()}catch(t){n.log("\u2014\u2014 log end \u2014\u2014")}})}(l,Object.assign({},e,{diff:p})),l.length=0,c.error)throw c.error;return f}}}}var y,b,v=function(t,e){return function(t,e){return new Array(e+1).join("0")}(0,e-t.toString().length)+t},g=function(t){return v(t.getHours(),2)+":"+v(t.getMinutes(),2)+":"+v(t.getSeconds(),2)+"."+v(t.getMilliseconds(),3)},w="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},O=[];y="object"===("undefined"==typeof global?"undefined":x(global))&&global?global:"undefined"!=typeof window?window:{},(b=y.DeepDiff)&&O.push(function(){void 0!==b&&y.DeepDiff===c&&(y.DeepDiff=b,b=void 0)}),e(r,n),e(i,n),e(o,n),e(a,n),Object.defineProperties(c,{diff:{value:c,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&u(t,e,function(r){n&&!n(t,e,r)||f(t,e,r)})},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":case"E":e[n]=r.lhs;break;case"N":e=l(e,n)}return e}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==b},enumerable:!0},noConflict:{value:function(){return O&&(O.forEach(function(t){t()}),O=null),c},enumerable:!0}});var I={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},k={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(t){return t},actionTransformer:function(t){return t},errorTransformer:function(t){return t},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dispatch,n=t.getState;return"function"==typeof e||"function"==typeof n?m()({dispatch:e,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=k,t.createLogger=m,t.logger=C,t.default=C,Object.defineProperty(t,"__esModule",{value:!0})}(e)},3:function(t,e){},"3Hso":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mzIk");e.StateContainer=r.StateContainer},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5UGa":function(t,e,n){var r=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var i=n("Tk29"),o=n("6cl6"),a=n("0jZk"),l=n("KFww"),s=n("i/Fw"),u=n("CnUt"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Error);function f(t,e,n,r){if(!(t instanceof e))throw new c("a '"+e.name+"' was expected, but '"+t.constructor.name+"' was provided in "+n.constructor.name+"#"+r)}function p(t,e,n,r,a){var l=o[t];return void 0===n?e.push(i.NIL):function(t,e,n,r){var i,o=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":i="number",isNaN(t)&&console.log('trying to encode "NaN" in '+n.constructor.name+"#"+r);break;case"string":i="string",o=!0;break;case"boolean":return}if(typeof t!==i&&(!o||o&&null!==t)){var a="'"+JSON.stringify(t)+"'"+(t&&t.constructor&&" ("+t.constructor.name+")");throw new c("a '"+i+"' was expected, but "+a+" was provided in "+n.constructor.name+"#"+r)}}(n,t,r,a),!!l&&(l(e,n),!0)}function h(t,e,n){var r=a[t];return r?r(e,n):null}e.Schema=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new u.ChangeTree,enumerable:!1,writable:!0}});var n=this._descriptors;n&&Object.defineProperties(this,n)}return Object.defineProperty(t.prototype,"_schema",{get:function(){return this.constructor._schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_descriptors",{get:function(){return this.constructor._descriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_indexes",{get:function(){return this.constructor._indexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_filters",{get:function(){return this.constructor._filters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$changed",{get:function(){return this.$changes.changed},enumerable:!0,configurable:!0}),t.prototype.decode=function(e,n){void 0===n&&(n={offset:0});var r=[],o=this._schema,u=this._indexes,c={};Object.keys(u).forEach(function(t){c[u[t]]=t});var f=e.length;e[n.offset]===i.TYPE_ID&&(n.offset+=2);for(var p=function(){var u=e[n.offset++];if(u===i.END_OF_STRUCTURE)return"break";var f=c[u],p=o[f],m=void 0,y=void 0,b=!1;if(p._schema)a.nilCheck(e,n)?(n.offset++,m=null):(m=d["_"+f]||d.createTypeInstance(e,n,p)).decode(e,n),b=!0;else if(Array.isArray(p)){p=p[0],y=[];var v=d["_"+f]||new l.ArraySchema;m=v.clone();var g=a.number(e,n),w=Math.min(a.number(e,n),g);b=w>0;var x=!1;m.length>g&&m.splice(g).forEach(function(t,e){t&&t.onRemove&&t.onRemove(),v.onRemove&&v.onRemove(t,g+e)});for(var _=0;_<w;_++){var O=a.number(e,n),I=void 0;a.indexChangeCheck(e,n)&&(a.uint8(e,n),I=a.number(e,n),x=!0);var k=!x&&!m[O]||x&&void 0===I;if(p.prototype instanceof t){var C=void 0;if((C=k?d.createTypeInstance(e,n,p):void 0!==I?v[I]:v[O])||(C=d.createTypeInstance(e,n,p),k=!0),a.nilCheck(e,n)){n.offset++,v.onRemove&&v.onRemove(C,O);continue}C.decode(e,n),m[O]=C}else m[O]=h(p,e,n);k?v.onAdd&&v.onAdd(m[O],O):v.onChange&&v.onChange(m[O],O),y.push(m[O])}}else if(p.map){p=p.map;var S=d["_"+f]||new s.MapSchema;m=S.clone();var P=a.number(e,n);b=P>0,x=!1;var A=Object.keys(S);for(_=0;_<P&&void 0!==e[n.offset]&&e[n.offset]!==i.END_OF_STRUCTURE;_++){var D=void 0;a.indexChangeCheck(e,n)&&(a.uint8(e,n),D=A[a.number(e,n)],x=!0);var E=a.numberCheck(e,n),j="string"!=typeof p,M=E?A[a.number(e,n)]:a.string(e,n);C=void 0,C=(k=!x&&!S[M]||x&&void 0===D&&E)&&j?d.createTypeInstance(e,n,p):void 0!==D?S[D]:S[M],a.nilCheck(e,n)?(n.offset++,C&&C.onRemove&&C.onRemove(),S.onRemove&&S.onRemove(C,M),delete m[M]):(j?(C.decode(e,n),m[M]=C):m[M]=h(p,e,n),k?S.onAdd&&S.onAdd(C,M):S.onChange&&S.onChange(C,M))}}else m=h(p,e,n),b=!0;b&&d.onChange&&r.push({field:f,value:y||m,previousValue:d["_"+f]}),d["_"+f]=m},d=this;n.offset<f&&"break"!==p(););return this.onChange&&r.length>0&&this.onChange(r),this},t.prototype.encode=function(t,e,n){var r=this;void 0===t&&(t=this),void 0===e&&(e=!1);var a=[],u=function(){r!==t&&a.push(i.END_OF_STRUCTURE)};if(!this.$changes.changed&&!e)return u(),a;for(var c=this._schema,h=this._indexes,d=this._filters,m=e||n?this.$changes.allChanges:this.$changes.changes,y=function(u,y){var v=m[u],g=c[v],w=d&&d[v],x=b["_"+v],_=h[v];if(void 0===x)return"continue";var O=[];if(g._schema){if(n&&w&&!w.call(b,n,x,t))return"continue";o.number(O,_),x?(f(x,g,b,v),b.tryEncodeTypeId(O,g,x.constructor),O=O.concat(x.encode(t,e,n))):o.uint8(O,i.NIL)}else if(Array.isArray(g)){o.number(O,_),o.number(O,x.length);var I=(e||n?x.$changes.allChanges:x.$changes.changes).filter(function(t){return void 0!==r["_"+v][t]}),k=I.length;o.number(O,k);var C="string"!=typeof g[0];f(b["_"+v],l.ArraySchema,b,v);for(var S=0;S<k;S++){var P=I[S],A=b["_"+v][P];if(!n||!w||w.call(b,n,A,t))if(C)o.number(O,P),void 0!==(R=x.$changes.getIndexChange(A))&&(o.uint8(O,i.INDEX_CHANGE),o.number(O,R)),f(A,g[0],b,v),b.tryEncodeTypeId(O,g[0],A.constructor),O=O.concat(A.encode(t,e,n));else if(o.number(O,P),!p(g[0],O,A,b,v)){console.log("cannot encode",c[v]);continue}}e||x.$changes.discard()}else if(g.map){o.number(O,_);var D=e||n?x.$changes.allChanges:x.$changes.changes;o.number(O,D.length);var E=Object.keys(b["_"+v]);C="string"!=typeof g.map,f(b["_"+v],s.MapSchema,b,v);for(var j=0;j<D.length;j++){var M="number"==typeof D[j]&&E[D[j]]||D[j],N=(A=b["_"+v][M],b["_"+v]._indexes.get(M));if(!n||!w||w.call(b,n,A,t)){if(e){if(void 0===A)continue;N=void 0}var R=x.$changes.getIndexChange(A);A&&void 0!==R&&(o.uint8(O,i.INDEX_CHANGE),o.number(O,b["_"+v]._indexes.get(R))),void 0!==N?o.number(O,N):o.string(O,M),A&&C?(f(A,g.map,b,v),b.tryEncodeTypeId(O,g.map,A.constructor),O=O.concat(A.encode(t,e,n))):void 0!==A?p(g.map,O,A,b,v):o.uint8(O,i.NIL)}}e||(x.$changes.discard(),n||b["_"+v]._updateIndexes())}else{if(n&&w&&!w.call(b,n,x,t))return"continue";if(o.number(O,_),!p(g,O,x,b,v))return console.log("cannot encode",c[v]),"continue"}a=a.concat(O)},b=this,v=0,g=m.length;v<g;v++)y(v);return u(),e||n||this.$changes.discard(),a},t.prototype.encodeFiltered=function(t){return this.encode(this,!1,t)},t.prototype.encodeAll=function(){return this.encode(this,!0)},t.prototype.encodeAllFiltered=function(t){return this.encode(this,!0,t)},t.prototype.clone=function(){var t=new this.constructor,e=this._schema;for(var n in e)t[n]=this[n];return t},t.prototype.triggerAll=function(){if(this.onChange){var t=[],e=this._schema;for(var n in e)void 0!==this[n]&&t.push({field:n,value:this[n],previousValue:void 0});this.onChange(t)}},t.prototype.toJSON=function(){var t=this._schema,e={};for(var n in t)e[n]=this["_"+n];return e},t.prototype.tryEncodeTypeId=function(t,e,n){e._typeid!==n._typeid&&(o.uint8(t,i.TYPE_ID),o.uint8(t,n._typeid))},t.prototype.createTypeInstance=function(t,e,n){return t[e.offset]===i.TYPE_ID?(e.offset++,new(this.constructor._context.get(a.uint8(t,e)))):new n},t}()},"6cl6":function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?t[e++]=r:r<2048?(t[e++]=192|r>>6,t[e++]=128|63&r):r<55296||r>=57344?(t[e++]=224|r>>12,t[e++]=128|r>>6&63,t[e++]=128|63&r):(r=65536+((1023&r)<<10|1023&n.charCodeAt(++i)),t[e++]=240|r>>18,t[e++]=128|r>>12&63,t[e++]=128|r>>6&63,t[e++]=128|63&r)}function i(t,e){t.push(e)}function o(t,e){t.push(e)}function a(t,e){t.push(e),t.push(e>>8)}function l(t,e){t.push(e),t.push(e>>8)}function s(t,e){t.push(e),t.push(e>>8),t.push(e>>16),t.push(e>>24)}function u(t,e){var n=e>>24,r=e>>16,i=e>>8;t.push(e),t.push(i),t.push(r),t.push(n)}function c(t,e){var n=Math.floor(e/Math.pow(2,32));u(t,e>>>0),u(t,n)}function f(t,e){var n=e/Math.pow(2,32)>>0;u(t,e>>>0),u(t,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.utf8Write=r,e.int8=i,e.uint8=o,e.int16=a,e.uint16=l,e.int32=s,e.uint32=u,e.int64=c,e.uint64=f,e.float32=function(t,e){y(t,e)},e.float64=function(t,e){b(t,e)};var p=!0,h=new Int32Array(2),d=new Float32Array(h.buffer),m=new Float64Array(h.buffer);function y(t,e){d[0]=e,s(t,h[0])}function b(t,e){m[0]=e,s(t,h[p?0:1]),s(t,h[p?1:0])}e.writeFloat32=y,e.writeFloat64=b,e.boolean=function(t,e){return o(t,e?1:0)},e.string=function(t,e){e||(e="");var n=function(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(e),i=0;if(n<32)t.push(160|n),i=1;else if(n<256)t.push(217),o(t,n),i=2;else if(n<65536)t.push(218),l(t,n),i=3;else{if(!(n<4294967296))throw new Error("String too long");t.push(219),u(t,n),i=5}return r(t,t.length,e),i+n},e.number=function t(e,n){return isNaN(n)?t(e,0):isFinite(n)?n!==(0|n)?(e.push(203),b(e,n),9):n>=0?n<128?(o(e,n),1):n<256?(e.push(204),o(e,n),2):n<65536?(e.push(205),l(e,n),3):n<4294967296?(e.push(206),u(e,n),5):(e.push(207),f(e,n),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208),i(e,n),2):n>=-32768?(e.push(209),a(e,n),3):n>=-2147483648?(e.push(210),s(e,n),5):(e.push(211),c(e,n),9):t(e,n>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}},ANjH:function(t,e,n){"use strict";n.r(e),n.d(e,"createStore",function(){return a}),n.d(e,"combineReducers",function(){return s}),n.d(e,"bindActionCreators",function(){return c}),n.d(e,"applyMiddleware",function(){return h}),n.d(e,"compose",function(){return p}),n.d(e,"__DO_NOT_USE__ActionTypes",function(){return o});var r=n("bCCX"),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(t,e,n){var i;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var l=t,s=e,u=[],c=u,f=!1;function p(){c===u&&(c=u.slice())}function h(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function d(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return p(),c.push(t),function(){if(e){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,p();var n=c.indexOf(t);c.splice(n,1)}}}function m(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,s=l(s,t)}finally{f=!1}for(var e=u=c,n=0;n<e.length;n++)(0,e[n])();return t}return m({type:o.INIT}),(i={dispatch:m,subscribe:d,getState:h,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");l=t,m({type:o.REPLACE})}})[r.a]=function(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(h())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t},i}function l(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function s(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var a,s=Object.keys(n);try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(u){a=u}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var u=s[o],c=t[u],f=(0,n[u])(c,e);if(void 0===f){var p=l(u,e);throw new Error(p)}i[u]=f,r=r||f!==c}return r?i:t}}function u(t,e){return function(){return e(t.apply(this,arguments))}}function c(t,e){if("function"==typeof t)return u(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"==typeof a&&(r[o]=u(a,e))}return r}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map(function(t){return t(i)});return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){f(t,e,n[e])})}return t}({},n,{dispatch:r=p.apply(void 0,o)(n.dispatch)})}}}},CnUt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("5UGa"),i=n("KFww"),o=n("i/Fw");e.ChangeTree=function(){function t(t,e,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.changed=!1,this.changes=[],this.allChanges=[],this.linkedTrees=[],this.parent=e,this.parentField=t,this.trackAllChanges=n}return t.prototype.link=function(t){this.linkedTrees.push(t)},t.prototype.change=function(t,e){void 0===e&&(e=!1),this.changed=!0,-1===this.changes.indexOf(t)&&this.changes.push(t);var n=this.allChanges.indexOf(t);e||-1!==n?e&&n>=0&&this.allChanges.splice(n,1):this.allChanges.push(t),this.parent&&this.parent.change(this.parentField)},t.prototype.mapIndex=function(t,e){this.indexMap||(this.indexMap=new Map,this.indexChange=new Map),this.indexMap.set(t,e)},t.prototype.getIndex=function(t){return this.indexMap&&this.indexMap.get(t)},t.prototype.deleteIndex=function(t){this.indexMap.delete(t)},t.prototype.mapIndexChange=function(t,e){this.indexChange.set(t,e)},t.prototype.getIndexChange=function(t){return this.indexChange&&this.indexChange.get(t)},t.prototype.deleteIndexChange=function(t){this.indexChange.delete(t)},t.prototype.changeAll=function(t){if(t instanceof r.Schema){var e=t._schema;for(var n in e)(t[n]instanceof r.Schema||t[n]instanceof i.ArraySchema||t[n]instanceof o.MapSchema)&&!t[n].$changes.parent.parent&&(t[n].$changes.parent=this),this.change(n)}else for(var a=0,l=Object.keys(t);a<l.length;a++)this.change(l[a])},t.prototype.discard=function(){this.changed=!1,this.changes=[],this.indexChange&&this.indexChange.clear()},t}()},FYgB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("G7qK");e.OnceSignal=r.OnceSignal;var i=n("aQYd");e.Signal=i.Signal;var o=n("hn5y");e.Slot=o.Slot;var a=n("YNOS");e.SlotList=a.SlotList},G7qK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("YNOS"),i=n("hn5y");e.OnceSignal=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.slots=r.SlotList.NIL,this.valueClasses=1===t.length&&t[0]instanceof Array?t[0]:t}return Object.defineProperty(t.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(t){this._valueClasses=t?t.slice():[];for(var e=this._valueClasses.length;e--;)if(!(this._valueClasses[e]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+e+" should be a Class but was:<"+this._valueClasses[e]+">."+this._valueClasses[e])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numListeners",{get:function(){return this.slots.length},enumerable:!0,configurable:!0}),t.prototype.addOnce=function(t){return this.registerListener(t,!0)},t.prototype.once=function(t){return this.addOnce(t)},t.prototype.remove=function(t){var e=this.slots.find(t);return e?(this.slots=this.slots.filterNot(t),e):null},t.prototype.removeAll=function(){this.slots=r.SlotList.NIL},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._valueClasses.length,r=t.length;if(r<n)throw new Error("Incorrect number of arguments. Expected at least "+n+" but received "+r+".");for(var i=0;i<n;i++)if(!(null===t[i]||t[i]instanceof this._valueClasses[i]||t[i].constructor===this._valueClasses[i]))throw new Error("Value object <"+t[i]+"> is not an instance of <"+this._valueClasses[i]+">.");var o=this.slots;if(o.nonEmpty)for(;o.nonEmpty;)o.head.execute(t),o=o.tail},t.prototype.registerListener=function(t,e){if(void 0===e&&(e=!1),this.registrationPossible(t,e)){var n=new i.Slot(t,this,e);return this.slots=this.slots.prepend(n),n}return this.slots.find(t)},t.prototype.registrationPossible=function(t,e){if(!this.slots.nonEmpty)return!0;var n=this.slots.find(t);if(!n)return!0;if(n.once!==e)throw new Error("You cannot addOnce() then add() the same listener without removing the relationship first.");return!1},t}()},KFww:function(t,e,n){var r=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,Object.create(e.prototype)),Object.defineProperties(i,{$sorting:{value:void 0,enumerable:!1,writable:!0},$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},triggerAll:{value:function(){if(i.onAdd)for(var t=0;t<i.length;t++)i.onAdd(i[t],t)}},clone:{value:function(){var t=new(e.bind.apply(e,[void 0].concat(i)));return t.onAdd=i.onAdd,t.onRemove=i.onRemove,t.onChange=i.onChange,t}}}),i}return r(e,t),e.prototype.sort=function(e){this.$sorting=!0,t.prototype.sort.call(this,e);for(var n=0,r=this.$changes.changes;n<r.length;n++){var i=r[n],o=this.$changes.getIndex(this[i]);void 0!==o&&this.$changes.mapIndexChange(this[i],o),this.$changes.mapIndex(this[i],i)}return this.$sorting=!1,this},e}(Array);e.ArraySchema=i},LEIV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ibR2");e.SchemaSerializer=function(){function t(){}return t.prototype.setState=function(t){this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){this.state.decode(t)},t.prototype.teardown=function(){},t.prototype.handshake=function(t){this.state?(new r.Reflection).decode(t):this.state=r.Reflection.decode(t)},t}()},NbP2:function(t,e,n){"use strict";function r(t){if(this._offset=0,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}r.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},r.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},r.prototype._str=function(t){var e=function(t,e,n){for(var r="",i=0,o=e,a=e+n;o<a;o++){var l=t.getUint8(o);if(0!=(128&l))if(192!=(224&l))if(224!=(240&l)){if(240!=(248&l))throw new Error("Invalid byte "+l.toString(16));(i=(7&l)<<18|(63&t.getUint8(++o))<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&l)<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0);else r+=String.fromCharCode((31&l)<<6|63&t.getUint8(++o));else r+=String.fromCharCode(l)}return r}(this._view,this._offset,t);return this._offset+=t,e},r.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},r.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,r=0,i=0,o=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),r=this._view.getInt8(this._offset+1),this._offset+=2,[r,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),r=this._view.getInt8(this._offset+2),this._offset+=3,[r,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),r=this._view.getInt8(this._offset+4),this._offset+=5,[r,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return i=this._view.getUint32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 212:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?void(this._offset+=1):[r,this._bin(1)];case 213:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(2)];case 214:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(4)];case 215:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?(i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(i+o)):[r,this._bin(8)];case 216:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")},t.exports=function(t){var e=new r(t),n=e._parse();if(e._offset!==t.byteLength)throw new Error(t.byteLength-e._offset+" trailing bytes");return n}},Ow78:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function l(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,l)}s((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Push=function(){function t(t){this.endpoint=t.replace("ws","http")}return t.prototype.register=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.check(),[4,this.registerServiceWorker()];case 1:return t.sent(),[4,this.requestNotificationPermission()];case 2:return t.sent(),[2]}})})},t.prototype.registerServiceWorker=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,navigator.serviceWorker.register(this.endpoint+"/push")];case 1:return[2,t.sent()]}})})},t.prototype.requestNotificationPermission=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,window.Notification.requestPermission()];case 1:if("granted"!==t.sent())throw new Error("Permission not granted for Notification");return[2]}})})},t.prototype.check=function(){if(!("serviceWorker"in navigator))throw new Error("No Service Worker support!");if(!("PushManager"in window))throw new Error("No Push API Support!")},t}()},"QW+4":function(t,e){ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer})},RN1w:function(t,e,n){var r;r=function(){"use strict";var t={},e=16;function n(){this.a=0,this.b=0,this.i=0,this.z=new Array(e)}n.prototype.init=function(t,n){var r,i,o=0,a=0;for(r=0;r<e;r++)o=o+(i=t[n+r])&65535,a=a+(e-r)*i&65535,this.z[r]=i;this.a=65535&o,this.b=65535&a,this.i=0},n.prototype.next=function(t){var n=this.z[this.i];this.z[this.i]=t,this.i=this.i+1&e-1,this.a=this.a-n+t&65535,this.b=this.b-e*n+this.a&65535},n.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(t){return t.charCodeAt(0)}),i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];function o(t){this.a=t,this.pos=0}function a(){this.a=[]}function l(t){var e,n;for(e=1,n=64;t>=n;e++,n<<=6);return e}function s(t){for(var e=0,n=0,r=0,i=0,o=0,a=t.length;a>=16;)e=(e=(e=(e=e+t[o+0]|0)+t[o+4]|0)+t[o+8]|0)+t[o+12]|0,n=(n=(n=(n=n+t[o+1]|0)+t[o+5]|0)+t[o+9]|0)+t[o+13]|0,r=(r=(r=(r=r+t[o+2]|0)+t[o+6]|0)+t[o+10]|0)+t[o+14]|0,i=(i=(i=(i=i+t[o+3]|0)+t[o+7]|0)+t[o+11]|0)+t[o+15]|0,o+=16,a-=16;for(;a>=4;)e=e+t[o+0]|0,n=n+t[o+1]|0,r=r+t[o+2]|0,i=i+t[o+3]|0,o+=4,a-=4;switch(i=((i+(r<<8)|0)+(n<<16)|0)+(e<<24)|0,a){case 3:i=i+(t[o+2]<<8)|0;case 2:i=i+(t[o+1]<<16)|0;case 1:i=i+(t[o+0]<<24)|0}return i>>>0}return o.prototype.haveBytes=function(){return this.pos<this.a.length},o.prototype.getByte=function(){var t=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return t},o.prototype.getChar=function(){return String.fromCharCode(this.getByte())},o.prototype.getInt=function(){for(var t,e=0;this.haveBytes()&&(t=i[127&this.getByte()])>=0;)e=(e<<6)+t;return this.pos--,e>>>0},a.prototype.toArray=function(){return this.a},a.prototype.putByte=function(t){this.a.push(255&t)},a.prototype.putChar=function(t){this.putByte(t.charCodeAt(0))},a.prototype.putInt=function(t){var e,n,i=[];if(0!==t){for(e=0;t>0;e++,t>>>=6)i.push(r[63&t]);for(n=e-1;n>=0;n--)this.putByte(i[n])}else this.putChar("0")},a.prototype.putArray=function(t,e,n){for(var r=e;r<n;r++)this.a.push(t[r])},t.create=function(t,r){var i,o=new a,u=r.length,c=t.length,f=-1;if(o.putInt(u),o.putChar("\n"),c<=e)return o.putInt(u),o.putChar(":"),o.putArray(r,0,u),o.putInt(s(r)),o.putChar(";"),o.toArray();var p=Math.ceil(c/e),h=new Array(p),d=new Array(p);for(i=0;i<h.length;i++)h[i]=-1;for(i=0;i<d.length;i++)d[i]=-1;var m,y=new n;for(i=0;i<c-e;i+=e)y.init(t,i),m=y.value()%p,h[i/e]=d[m],d[m]=i/e;for(var b,v,g,w,x,_=0;_+e<u;)for(w=0,x=0,y.init(r,_),i=0,g=0;;){var O=250;for(v=d[m=y.value()%p];v>=0&&O-- >0;){var I,k,C,S,P,A,D;for(S=0,A=b=v*e,D=_+i;A<c&&D<u&&t[A]===r[D];S++,A++,D++);for(S--,P=1;P<b&&P<=i&&t[b-P]===r[_+i-P];P++);k=b- --P,C=i-P,(I=S+P+1)>=l(i-P)+l(I)+l(k)+3&&I>g&&(g=I,w=b-P,x=C),v=h[v]}if(g>0){x>0&&(o.putInt(x),o.putChar(":"),o.putArray(r,_,_+x),_+=x),_+=g,o.putInt(g),o.putChar("@"),o.putInt(w),o.putChar(","),w+g-1>f&&(f=w+g-1),g=0;break}if(_+i+e>=u){o.putInt(u-_),o.putChar(":"),o.putArray(r,_,_+u-_),_=u;break}y.next(r[_+i+e]),i++}return _<u&&(o.putInt(u-_),o.putChar(":"),o.putArray(r,_,_+u-_)),o.putInt(s(r)),o.putChar(";"),o.toArray()},t.outputSize=function(t){var e=new o(t),n=e.getInt();if("\n"!==e.getChar())throw new Error("size integer not terminated by '\\n'");return n},t.apply=function(t,e,n){var r,i=0,l=new o(e),u=t.length,c=e.length;if(r=l.getInt(),"\n"!==l.getChar())throw new Error("size integer not terminated by '\\n'");for(var f=new a;l.haveBytes();){var p,h;switch(p=l.getInt(),l.getChar()){case"@":if(h=l.getInt(),l.haveBytes()&&","!==l.getChar())throw new Error("copy command not terminated by ','");if((i+=p)>r)throw new Error("copy exceeds output file size");if(h+p>u)throw new Error("copy extends past end of input");f.putArray(t,h,h+p);break;case":":if((i+=p)>r)throw new Error("insert command gives an output larger than predicted");if(p>c)throw new Error("insert count exceeds size of delta");f.putArray(l.a,l.pos,l.pos+p),l.pos+=p;break;case";":var d=f.toArray();if((!n||!1!==n.verifyChecksum)&&p!==s(d))throw new Error("bad checksum");if(i!==r)throw new Error("generated size does not match predicted size");return d;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},t},t.exports?t.exports=r():this.fossilDelta=r()},"S/KZ":function(t,e,n){"use strict";var r;function i(){return r||(r="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){},removeItem:function(t){delete this.cache[t]}}),r}Object.defineProperty(e,"__esModule",{value:!0}),e.setItem=function(t,e){i().setItem(t,e)},e.removeItem=function(t){i().removeItem(t)},e.getItem=function(t,e){var n=i().getItem(t);"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(t){return e(t)}):e(n)}},SLVX:function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},Tk29:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.END_OF_STRUCTURE=193,e.NIL=192,e.INDEX_CHANGE=212,e.TYPE_ID=213},"V/h/":function(t,e,n){"use strict";n.r(e),n.d(e,"produce",function(){return $}),n.d(e,"setAutoFreeze",function(){return W}),n.d(e,"setUseProxies",function(){return Y}),n.d(e,"applyPatches",function(){return H}),n.d(e,"Immer",function(){return V}),n.d(e,"original",function(){return h}),n.d(e,"isDraft",function(){return f}),n.d(e,"isDraftable",function(){return p}),n.d(e,"nothing",function(){return s}),n.d(e,"immerable",function(){return u});var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s="undefined"!=typeof Symbol?Symbol("immer-nothing"):((i="immer-nothing")in(r={})?Object.defineProperty(r,i,{value:!0,enumerable:!0,configurable:!0,writable:!0}):r[i]=!0,r),u="undefined"!=typeof Symbol?Symbol("immer-draftable"):"__$immer_draftable",c="undefined"!=typeof Symbol?Symbol("immer-state"):"__$immer_state";function f(t){return!!t&&!!t[c]}function p(t){if(!t||"object"!==(void 0===t?"undefined":o(t)))return!1;if(Array.isArray(t))return!0;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype||!!t[u]||!!t.constructor[u]}function h(t){if(t&&t[c])return t[c].base}var d=Object.assign||function(t,e){for(var n in e)g(e,n)&&(t[n]=e[n]);return t},m="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function y(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return m(t).forEach(function(r){if(r!==c){var i=Object.getOwnPropertyDescriptor(t,r);if(i.get){if(!e)throw new Error("Immer drafts cannot have computed properties");i.value=i.get.call(t)}i.enumerable?n[r]=i.value:Object.defineProperty(n,r,{value:i.value,writable:!0,configurable:!0})}}),n}function b(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(n,t[n],t);else m(t).forEach(function(n){return e(n,t[n],t)})}function v(t,e){return Object.getOwnPropertyDescriptor(t,e).enumerable}function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var x={},_=[],O=function(){return _[_.length-1]};function I(){this.revoked=!0}function k(t){return t.copy||t.base}function C(t){t.modified||(t.modified=!0,t.parent&&C(t.parent))}function S(t){t.copy||(t.copy=P(t.base))}function P(t){var e=t&&t[c];if(e){e.finalizing=!0;var n=y(e.draft,!0);return e.finalizing=!1,n}return y(t)}function A(t){if(!0===t.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(k(t)))}function D(t){for(var e=t.base,n=Object.keys(t.draft),r=n.length-1;r>=0;r--)if(void 0===e[n[r]]&&!g(e,n[r]))return!0;return n.length!==Object.keys(e).length}function E(t){var e=t.draft;if(e.length!==t.base.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!n||n.get)}var j=Object.freeze({scopes:_,currentScope:O,willFinalize:function(t,e,n){var r=O();r.forEach(function(t){return t.finalizing=!0}),void 0!==t&&t!==e||(n&&function t(e){if(e&&"object"===(void 0===e?"undefined":o(e))){var n=e[c];if(n){var r=n.base,i=n.draft,a=n.assigned;if(Array.isArray(e)){if(E(n)){if(C(n),a.length=!0,i.length<r.length)for(var l=i.length;l<r.length;l++)a[l]=!1;else for(var s=r.length;s<i.length;s++)a[s]=!0;for(var u=0;u<i.length;u++)void 0===a[u]&&t(i[u])}}else Object.keys(i).forEach(function(e){void 0!==r[e]||g(r,e)?a[e]||t(i[e]):(a[e]=!0,C(n))}),Object.keys(r).forEach(function(t){void 0!==i[t]||g(i,t)||(a[t]=!1,C(n))})}}}(e),function(t){for(var e=t.length-1;e>=0;e--){var n=t[e];!1===n.modified&&(Array.isArray(n.base)?E(n)&&C(n):D(n)&&C(n))}}(r))},createDraft:function t(e,n){var r=Array.isArray(e),i=P(e);b(i,function(n){!function(e,n,r){var i=x[n];i?i.enumerable=r:x[n]=i={configurable:!0,enumerable:r,get:function(){return function(e,n){A(e);var r=k(e)[n];return!e.finalizing&&r===e.base[n]&&p(r)?(S(e),e.copy[n]=t(r,e)):r}(this[c],n)},set:function(t){!function(t,e,n){if(A(t),t.assigned[e]=!0,!t.modified){if(w(k(t)[e],n))return;C(t),S(t)}t.copy[e]=n}(this[c],n,t)}},Object.defineProperty(e,n,i)}(i,n,r||v(e,n))});var o={scope:n?n.scope:O(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:n,base:e,draft:i,copy:null,revoke:I,revoked:!1};return Object.defineProperty(i,c,{value:o,enumerable:!1,writable:!0}),o.scope.push(o),i}}),M=[],N=function(){return M[M.length-1]};function R(t,e){var n={scope:e?e.scope:N(),modified:!1,finalized:!1,assigned:{},parent:e,base:t,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(t)?Proxy.revocable([n],T):Proxy.revocable(n,G),i=r.revoke,o=r.proxy;return n.draft=o,n.revoke=i,n.scope.push(n),o}var G={get:function(t,e){if(e===c)return t;var n=t.drafts;if(!t.modified&&g(n,e))return n[e];var r=L(t)[e];if(t.finalized||!p(r))return r;if(t.modified){if(r!==t.base[e])return r;n=t.copy}return n[e]=R(r,t)},has:function(t,e){return e in L(t)},ownKeys:function(t){return Reflect.ownKeys(L(t))},set:function(t,e,n){if(!t.modified){if(n?w(t.base[e],n)||n===t.drafts[e]:w(t.base[e],n)&&e in t.base)return!0;z(t)}return t.assigned[e]=!0,t.copy[e]=n,!0},deleteProperty:function(t,e){return(void 0!==t.base[e]||e in t.base)&&(t.assigned[e]=!1,z(t)),t.copy&&delete t.copy[e],!0},getOwnPropertyDescriptor:function(t,e){var n=L(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&(r.writable=!0,r.configurable=!Array.isArray(n)||"length"!==e),r},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(t){return Object.getPrototypeOf(t.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},T={};function L(t){return t.copy||t.base}function z(t){t.modified||(t.modified=!0,t.copy=d(y(t.base),t.drafts),t.drafts=null,t.parent&&z(t.parent))}b(G,function(t,e){T[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),T.deleteProperty=function(t,e){if(isNaN(parseInt(e)))throw new Error("Immer only supports deleting array indices");return G.deleteProperty.call(this,t[0],e)},T.set=function(t,e,n){if("length"!==e&&isNaN(parseInt(e)))throw new Error("Immer only supports setting array indices and the 'length' property");return G.set.call(this,t[0],e,n)};var F=Object.freeze({scopes:M,currentScope:N,willFinalize:function(){},createDraft:R});function q(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.path;if(0===i.length&&"replace"===r.op)t=r.value;else{for(var a=t,l=0;l<i.length-1;l++)if(!(a=a[i[l]])||"object"!==(void 0===a?"undefined":o(a)))throw new Error("Cannot apply patch, path doesn't resolve: "+i.join("/"));var s=i[i.length-1];switch(r.op){case"replace":case"add":a[s]=r.value;break;case"remove":if(Array.isArray(a)){if(s!==a.length-1)throw new Error("Only the last index of an array can be removed, index: "+s+", length: "+a.length);a.length-=1}else delete a[s];break;default:throw new Error("Unsupported patch operation: "+r.op)}}}return t}var U={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:"undefined"==typeof process&&"verifyMinified"===(function(){}).name,onAssign:null,onDelete:null,onCopy:null},V=function(){function t(e){a(this,t),d(this,U,e),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return l(t,[{key:"produce",value:function(t,e,n){var r=this;if("function"==typeof t&&"function"!=typeof e){var i=e;return e=t,function(){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r.produce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,function(t){var r;return(r=e).call.apply(r,[t,t].concat(n))})}}if("function"!=typeof e)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("the third argument of a producer should not be set or a function");var o=void 0;if(p(t)){this.scopes.push([]);var a=this.createDraft(t);try{o=e.call(a,a),this.willFinalize(o,a,!!n);var l=n&&[],u=n&&[];if(void 0===o||o===a)o=this.finalize(a,[],l,u);else{if(a[c].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");p(o)&&(o=this.finalize(o)),n&&(l.push({op:"replace",path:[],value:o}),u.push({op:"replace",path:[],value:t}))}}finally{this.currentScope().forEach(function(t){return t.revoke()}),this.scopes.pop()}n&&n(l,u)}else if(void 0===(o=e(t)))return t;return o===s?void 0:o}},{key:"setAutoFreeze",value:function(t){this.autoFreeze=t}},{key:"setUseProxies",value:function(t){this.useProxies=t,d(this,t?F:j)}},{key:"applyPatches",value:function(t,e){return f(t)?q(t,e):this.produce(t,function(t){return q(t,e)})}},{key:"finalize",value:function(t,e,n,r){var i=this,o=t[c];if(!o)return Object.isFrozen(t)?t:this.finalizeTree(t);if(o.scope!==this.currentScope())return t;if(!o.modified)return o.base;if(!o.finalized){if(o.finalized=!0,this.finalizeTree(o.draft,e,n,r),this.onDelete)if(this.useProxies){var a=o.assigned;for(var l in a)a[l]||this.onDelete(o,l)}else{var s=o.copy;b(o.base,function(t){g(s,t)||i.onDelete(o,t)})}this.onCopy&&this.onCopy(o),this.autoFreeze&&1===this.scopes.length&&Object.freeze(o.copy),n&&function(t,e,n,r){Array.isArray(t.base)?function(t,e,n,r){for(var i=t.base,o=t.copy,a=t.assigned,l=Math.min(i.length,o.length),s=0;s<l;s++)if(a[s]&&i[s]!==o[s]){var u=e.concat(s);n.push({op:"replace",path:u,value:o[s]}),r.push({op:"replace",path:u,value:i[s]})}if(l<o.length){for(var c=l;c<o.length;c++)n.push({op:"add",path:e.concat(c),value:o[c]});r.push({op:"replace",path:e.concat("length"),value:i.length})}else if(l<i.length){n.push({op:"replace",path:e.concat("length"),value:o.length});for(var f=l;f<i.length;f++)r.push({op:"add",path:e.concat(f),value:i[f]})}}(t,e,n,r):function(t,e,n,r){var i=t.base,o=t.copy;b(t.assigned,function(t,a){var l=i[t],s=o[t],u=a?t in i?"replace":"add":"remove";if(l!==s||"replace"!==u){var c=e.concat(t);n.push("remove"===u?{op:u,path:c}:{op:u,path:c,value:s}),r.push("add"===u?{op:"remove",path:c}:"remove"===u?{op:"add",path:c,value:l}:{op:"replace",path:c,value:l})}})}(t,e,n,r)}(o,e,n,r)}return o.copy}},{key:"finalizeTree",value:function(t,e,n,r){var i=this,o=t[c];o&&(this.useProxies||(o.finalizing=!0,o.copy=y(o.draft,!0),o.finalizing=!1),t=o.copy);var a=this.onAssign;return b(t,function l(s,u,c){if(u===c)throw Error("Immer forbids circular references");var h=!!o&&c===t;if(f(u)){if(u=n&&h&&!o.assigned[s]?i.finalize(u,e.concat(s),n,r):i.finalize(u),Array.isArray(c)||v(c,s)?c[s]=u:Object.defineProperty(c,s,{value:u}),h&&u===o.base[s])return}else{if(h&&w(u,o.base[s]))return;p(u)&&!Object.isFrozen(u)&&b(u,l)}h&&a&&a(o,s,u)}),t}}]),t}(),B=new V,$=B.produce,W=B.setAutoFreeze.bind(B),Y=B.setUseProxies.bind(B),H=B.applyPatches.bind(B);e.default=$},W8Xk:function(t,e,n){"use strict";n.r(e),n.d(e,"parse",function(){return i}),n.d(e,"stringify",function(){return o});var r=function(t,e){return{parse:function(e){var n=JSON.parse(e,i).map(r),o=n[0];return"object"==typeof o&&o?function e(n,r,i){return Object.keys(i).reduce(function(i,o){var a=i[o];if(a instanceof t){var l=n[a];"object"!=typeof l||r.has(l)?i[o]=l:(r.add(l),i[o]=e(n,r,l))}return i},i)}(n,new Set,o):o},stringify:function(t){for(var r,i=new Map,o=[],a=[],l=+n(i,o,t),s=function(t,a){if(r)return r=!r,a;switch(typeof a){case"object":if(null===a)return a;case e:return i.get(a)||n(i,o,a)}return a};l<o.length;l++)r=!0,a[l]=JSON.stringify(o[l],s);return"["+a.join(",")+"]"}};function n(e,n,r){var i=t(n.push(r)-1);return e.set(r,i),i}function r(e){return e instanceof t?t(e):e}function i(n,r){return typeof r===e?new t(r):r}}(String,"string");e.default=r;const i=r.parse,o=r.stringify},WjO6:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n("3Hso"),o=r(n("RN1w")),a=r(n("ckdo"));e.FossilDeltaSerializer=function(){function t(){this.api=new i.StateContainer({})}return t.prototype.getState=function(){return this.api.state},t.prototype.setState=function(t){this.previousState=new Uint8Array(t),this.api.set(a.decode(this.previousState))},t.prototype.patch=function(t){this.previousState=new Uint8Array(o.apply(this.previousState,t)),this.api.set(a.decode(this.previousState))},t.prototype.teardown=function(){this.api.removeAllListeners()},t}()},Y0G6:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function l(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,l)}s((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n("gqVT"),a=n("S/KZ"),l="colyseus-auth-token";!function(t){t.ios="ios",t.android="android"}(e.Platform||(e.Platform={})),e.Auth=function(){function t(t){var e=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=t.replace("ws","http"),a.getItem(l,function(t){return e.token=t})}return Object.defineProperty(t.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!0,configurable:!0}),t.prototype.login=function(t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var e,n,r,s,u;return i(this,function(i){switch(i.label){case 0:for(n in e=[],t)e.push(n+"="+t[n]);return this.token&&e.push("token="+this.token),[4,o.post(this.endpoint+"/auth?"+e.join("&"),{headers:{Accept:"application/json"}})];case 1:for(u in r=i.sent(),this.token=(s=r.data).token,a.setItem(l,this.token),s)this.hasOwnProperty(u)&&(this[u]=s[u]);return this.registerPingService(),[2,this]}})})},t.prototype.save=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,o.put(this.endpoint+"/auth",{headers:{Accept:"application/json",Authorization:"Bearer "+this.token},body:{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone}})];case 1:return t.sent(),[2,this]}})})},t.prototype.getFriends=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,o.get(this.endpoint+"/friends/all",{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,t.sent().data]}})})},t.prototype.getOnlineFriends=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,o.get(this.endpoint+"/friends/online",{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,t.sent().data]}})})},t.prototype.getFriendRequests=function(t){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,o.get(this.endpoint+"/friends/requests",{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,t.sent().data]}})})},t.prototype.sendFriendRequest=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,o.post(this.endpoint+"/friends/requests?userId="+t,{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,e.sent().data]}})})},t.prototype.acceptFriendRequest=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,o.put(this.endpoint+"/friends/requests?userId="+t,{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,e.sent().data]}})})},t.prototype.declineFriendRequest=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,o.del(this.endpoint+"/friends/requests?userId="+t,{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,e.sent().data]}})})},t.prototype.blockUser=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,o.post(this.endpoint+"/friends/block?userId="+t,{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,e.sent().data]}})})},t.prototype.unblockUser=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,o.put(this.endpoint+"/friends/block?userId="+t,{headers:{Accept:"application/json",Authorization:"Bearer "+this.token}})];case 1:return[2,e.sent().data]}})})},t.prototype.logout=function(){this.token=void 0,a.removeItem(l),this.unregisterPingService()},t.prototype.registerPingService=function(t){var e=this;void 0===t&&(t=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval(function(){o.get(e.endpoint+"/auth",{headers:{Accept:"application/json",Authorization:"Bearer "+e.token}})},t)},t.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},t}()},YNOS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlotList=function(){function t(e,n){if(void 0===n&&(n=null),this.nonEmpty=!1,e||n){if(!e)throw new Error("Parameter head cannot be null.");this.head=e,this.tail=n||t.NIL,this.nonEmpty=!0}else{if(t.NIL)throw new Error("Parameters head and tail are null. Use the NIL element instead.");this.nonEmpty=!1}}return Object.defineProperty(t.prototype,"length",{get:function(){if(!this.nonEmpty)return 0;if(this.tail===t.NIL)return 1;for(var e=0,n=this;n.nonEmpty;)++e,n=n.tail;return e},enumerable:!0,configurable:!0}),t.prototype.prepend=function(e){return new t(e,this)},t.prototype.append=function(e){if(!e)return this;if(!this.nonEmpty)return new t(e);if(this.tail===t.NIL)return new t(e).prepend(this.head);for(var n=new t(this.head),r=n,i=this.tail;i.nonEmpty;)r=r.tail=new t(i.head),i=i.tail;return r.tail=new t(e),n},t.prototype.insertWithPriority=function(e){if(!this.nonEmpty)return new t(e);var n=e.priority;if(n>this.head.priority)return this.prepend(e);for(var r=new t(this.head),i=r,o=this.tail;o.nonEmpty;){if(n>o.head.priority)return i.tail=o.prepend(e),r;i=i.tail=new t(o.head),o=o.tail}return i.tail=new t(e),r},t.prototype.filterNot=function(e){if(!this.nonEmpty||null==e)return this;if(e===this.head.listener)return this.tail;for(var n=new t(this.head),r=n,i=this.tail;i.nonEmpty;){if(i.head.listener===e)return r.tail=i.tail,n;r=r.tail=new t(i.head),i=i.tail}return this},t.prototype.contains=function(t){if(!this.nonEmpty)return!1;for(var e=this;e.nonEmpty;){if(e.head.listener===t)return!0;e=e.tail}return!1},t.prototype.find=function(t){if(!this.nonEmpty)return null;for(var e=this;e.nonEmpty;){if(e.head.listener===t)return e.head;e=e.tail}return null},t.prototype.toString=function(){for(var t="",e=this;e.nonEmpty;)t+=e.head+" -> ",e=e.tail;return"[List "+(t+="NIL")+"]"},t.NIL=new t(null,null),t}()},ZOD7:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("ckdo")),o=n("FYgB"),a=n("cihy"),l=n("zooS"),s=n("woCW"),u=n("S/KZ"),c=n("Y0G6"),f=n("Ow78");e.Client=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.onOpen=new o.Signal,this.onClose=new o.Signal,this.onError=new o.Signal,this.rooms={},this.connectingRooms={},this.requestId=0,this.roomsAvailableRequests={},this.hostname=t,this.auth=new c.Auth(this.hostname),this.push=new f.Push(this.hostname),u.getItem("colyseusid",function(t){return n.connect(t,e)})}return t.prototype.join=function(t,e,n){return void 0===e&&(e={}),this.createRoomRequest(t,e,n)},t.prototype.rejoin=function(t,e,n){if(!e.sessionId)throw new Error("'sessionId' options is required for 'rejoin'.");return this.join(t,e,n)},t.prototype.getAvailableRooms=function(t,e){var n=this,r=this.getNextRequestId(),i=function(){return delete n.roomsAvailableRequests[r]},o=setTimeout(function(){i(),e([],"timeout")},15e3);this.connection.send([l.Protocol.ROOM_LIST,r,t]),this.roomsAvailableRequests[r]=function(t){i(),clearTimeout(o),e(t)}},t.prototype.close=function(){this.connection.close()},t.prototype.createRoom=function(t,e,n){return void 0===e&&(e={}),new s.Room(t,e,n)},t.prototype.createRoomRequest=function(t,e,n,r,i){var o=this;e.requestId=this.getNextRequestId(),this.auth.hasToken&&(e.token=this.auth.token);var a=r||this.createRoom(t,e,n);return a.onLeave.addOnce(function(){delete o.rooms[a.id],delete o.connectingRooms[e.requestId]}),e.retryTimes&&a.onError.addOnce(function(){i=i||0,!a.hasJoined&&i<=e.retryTimes&&o.createRoomRequest(t,e,n,a,++i)}),this.connectingRooms[e.requestId]=a,this.connection.send([l.Protocol.JOIN_REQUEST,t,e]),a},t.prototype.connect=function(t,e){var n=this;void 0===e&&(e={}),this.id=t||"",this.connection=new a.Connection(this.buildEndpoint("",e)),this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(t){return n.onClose.dispatch(t)},this.connection.onerror=function(t){return n.onError.dispatch(t)},this.connection.onopen=function(){n.id&&n.onOpen.dispatch()}},t.prototype.buildEndpoint=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});var n=["colyseusid="+this.id];for(var r in e)e.hasOwnProperty(r)&&n.push(r+"="+e[r]);return this.hostname+"/"+t+"?"+n.join("&")},t.prototype.onMessageCallback=function(t){if(this.previousCode){if(this.previousCode===l.Protocol.ROOM_LIST){var e=i.decode(new Uint8Array(t.data)),n=e[1];this.roomsAvailableRequests[a=e[0]]?this.roomsAvailableRequests[a](n):console.warn("receiving ROOM_LIST after timeout:",n)}this.previousCode=void 0}else{var r=new DataView(t.data),o=r.getUint8(0);if(o===l.Protocol.USER_ID)this.id=l.utf8Read(r,1),u.setItem("colyseusid",this.id),this.onOpen.dispatch();else if(o===l.Protocol.JOIN_REQUEST){var a=r.getUint8(1),s=this.connectingRooms[a],c="";if(!s)return void console.warn("colyseus.js: client left room before receiving session id.");s.id=l.utf8Read(r,2),this.rooms[s.id]=s;var f=3+s.id.length;r.byteLength>f&&(c=l.utf8Read(r,f)+"/"),s.connect(this.buildEndpoint(c+s.id,s.options)),delete this.connectingRooms[a]}else if(o===l.Protocol.JOIN_ERROR){var p=l.utf8Read(r,1);console.error("colyseus.js: server error:",p),this.onError.dispatch(p)}else o===l.Protocol.ROOM_LIST&&(this.previousCode=o)}},t.prototype.getNextRequestId=function(){return++this.requestId%255},t}()},aQYd:function(t,e,n){var r=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var i=n("G7qK");e.Signal=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.add=function(t){return this.registerListener(t)},e}(i.OnceSignal)},bCCX:function(t,e,n){"use strict";(function(t){var r,i=n("SLVX");r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:t;var o=Object(i.a)(r);e.a=o}).call(this,n("3UD+")(t))},bQHL:function(t,e,n){!function(t,e,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){s(t,e,n[e])})}return t}function c(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function h(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function d(t,e){var n=new p(t),r=e&&e.state,o=n.next;return o.quick=o,r&&("object"==i(r)&&h(r,n),o.state=function(){return h(n,{})}),o}n=n&&n.hasOwnProperty("default")?n.default:n;var m=function(){function t(e){o(this,t),this.state=e._random||{seed:"0"}}return l(t,[{key:"update",value:function(t){var e=u({},t.ctx,{_random:this.state});return u({},t,{ctx:e})}},{key:"attach",value:function(t){return u({},t,{random:this._api()})}},{key:"_random",value:function(){var t,e=this.state,n=(t=void 0===e.prngstate?new d(e.seed,{state:!0}):new d("",{state:e.prngstate}))();return this.state=u({},e,{prngstate:t.state()}),n}},{key:"_api",value:function(){var t=this._random.bind(this),e={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={},r=function(r){var i=e[r];n[r]=function(e){return void 0===e?Math.floor(t()*i)+1:f(new Array(e).keys()).map(function(){return Math.floor(t()*i)+1})}};for(var i in e)r(i);return u({},n,{Die:function(e,n){return void 0===e&&(e=6),void 0===n?Math.floor(t()*e)+1:f(new Array(n).keys()).map(function(){return Math.floor(t()*e)+1})},Number:function(){return t()},Shuffle:function(e){for(var n=e.slice(0),r=e.length,i=0,o=new Array(r);r;){var a=r*t()|0;o[i++]=n[a],n[a]=n[--r]}return o}})}}]),t}();m.detach=function(t){return c(t,["random"])},m.seed=function(){return(+new Date).toString(36).slice(-10)};var y=function(){function t(e,n){o(this,t),this.flow=e,this.playerID=n,this.dispatch=[]}return l(t,[{key:"attach",value:function(t){var e=this,n={},r=!0,i=!1,o=void 0;try{for(var a,l=function(){var t=a.value;n[t]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.dispatch.push({key:t,args:r})}},s=this.flow.eventNames[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)l()}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return u({},t,{events:n})}},{key:"update",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i=this.dispatch[Symbol.iterator]();!(e=i.next().done);e=!0){var o={type:"GAME_EVENT",payload:{type,args,playerID,credentials},automatic:!0};t=u({},t,this.flow.processGameEvent(t,o))}}catch(a){n=!0,r=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return t}}]),t}();y.detach=function(t){return c(t,["events"])};var b=[{fnWrap:function(t){return n(t)}}],v=function(t,e,n){return[].concat(b,f(n.plugins)).filter(function(t){return void 0!==t.G}).filter(function(t){return void 0!==t.G.setup}).forEach(function(r){t=r.G.setup(t,e,n)}),t},g=function(){function t(){o(this,t),this._payload=void 0}return l(t,[{key:"_api",value:function(){var t=this;return{setPayload:function(e){t._payload=e}}}},{key:"attach",value:function(t){return u({},t,{log:this._api()})}},{key:"update",value:function(t){if(void 0===this._payload)return t;var e=t.deltalog;return e[e.length-1]=u({},e[e.length-1],{payload:this._payload}),this._payload=void 0,u({},t,{deltalog:e})}}],[{key:"detach",value:function(t){return c(t,["log"])}}]),t}(),w=function(){function t(e,n,r){o(this,t),this.random=new m(e),this.events=new y(n.flow,r),this.log=new g}return l(t,[{key:"attachToContext",value:function(t){var e=this.random.attach(t);return e=this.events.attach(e),this.log.attach(e)}},{key:"_update",value:function(t,e){var n=e?this.events.update(t):t;return n=this.random.update(n),this.log.update(n)}},{key:"updateAndDetach",value:function(e,n){var r=this._update(e,n);return r.ctx=t.detachAllFromContext(r.ctx),r}}],[{key:"detachAllFromContext",value:function(t){var e=m.detach(t);return e=y.detach(e),g.detach(e)}}]),t}(),x=function(){};function _(t){x("ERROR:",t)}var O=function(t){return"".concat(t,":metadata")};function I(t,e,n){return void 0===t||void 0===e?e:e.map(function(e){if(null!==n&&+n==+e.action.payload.playerID)return e;if("MAKE_MOVE"!==e.action.type)return e;var r=e;if(t.includes(e.action.payload.type)){var i=u({},r.action.payload,{args:void 0,argsRedacted:!0});r=u({},r,{action:u({},r.action,{payload:i})})}return r})}var k=function(t){var e=t.action,n=t.gameMetadata,r=t.playerID;return!n||!e.payload||!Object.keys(n.players).some(function(t){return!(!n.players[t]||!n.players[t].credentials)})||!!e.payload.credentials&&e.payload.credentials===n.players[r].credentials};t.Master=function(){function t(e,n,r,i){o(this,t),this.game=e,this.storageAPI=n,this.transportAPI=r,this.auth=function(){return!0},!0===i?this.auth=k:"function"==typeof i&&(this.auth=i)}return l(t,[{key:"onUpdate",value:async function(t,e,n,i){var o,a=this;if(this.executeSynchronously){var l=this.storageAPI.get(O(n));o=this.auth({action:t,gameMetadata:l,gameID:n,playerID:i})}else{var s=await this.storageAPI.get(O(n));o=this.auth({action:t,gameMetadata:s,gameID:n,playerID:i})}if(!o)return{error:"unauthorized action"};var c,p=n;if(void 0===(c=this.executeSynchronously?this.storageAPI.get(p):await this.storageAPI.get(p)))return _("game not found, gameID=[".concat(p,"]")),{error:"game not found"};var h,d,m,y=(d=(h={game:this.game,numPlayers:c.ctx.numPlayers}).game,m=h.multiplayer,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GAME_EVENT":if(t=u({},t,{deltalog:[]}),m)return t;if(null!=e.payload.playerID&&!d.flow.canPlayerCallEvent(t.G,t.ctx,e.payload.playerID))return t;var n=new w(t.ctx,d,e.payload.playerID);t.ctx=n.attachToContext(t.ctx);var r=d.flow.processGameEvent(t,e);return u({},r=n.updateAndDetach(r,!0),{_stateID:t._stateID+1});case"MAKE_MOVE":if(t=u({},t,{deltalog:[]}),!d.moveNames.includes(e.payload.type))return t;if(!d.flow.canMakeMove(t.G,t.ctx,e.payload.type))return t;if(null!=e.payload.playerID&&!d.flow.canPlayerMakeMove(t.G,t.ctx,e.payload.playerID))return t;var i=new w(t.ctx,d,e.payload.playerID),o=i.attachToContext(t.ctx),a=d.processMove(t.G,e.payload,o);if("INVALID_MOVE"===a)return t;var l=i.updateAndDetach(u({},t,{deltalog:[{action:e,_stateID:t._stateID,turn:t.ctx.turn,phase:t.ctx.phase}]}),!1),s=l.ctx;return m&&!d.flow.optimisticUpdate(a,s,e.payload)&&(a=t.G),t=u({},l,{G:a,ctx:s,_stateID:t._stateID+1}),m?t:(o=i.attachToContext(t.ctx),t=d.flow.processMove(u({},t,{ctx:o}),e.payload),(t=i.updateAndDetach(t,!0))._undo[t._undo.length-1].ctx=t.ctx,t);case"RESET":case"UPDATE":case"SYNC":return e.state;case"UNDO":var c=t._undo,p=t._redo;if(c.length<2)return t;var h=c[c.length-1],y=c[c.length-2];return d.flow.canUndoMove(t.G,t.ctx,h.moveType)?u({},t,{G:y.G,ctx:y.ctx,_undo:c.slice(0,c.length-1),_redo:[h].concat(f(p))}):t;case"REDO":var b=t._redo;if(0==b.length)return t;var v=b[0];return u({},t,{G:v.G,ctx:v.ctx,_undo:[].concat(f(t._undo),[v]),_redo:b.slice(1)});default:return t}}),b=r.createStore(y,c);if("MAKE_MOVE"!=t.type||this.game.flow.canPlayerMakeMove(c.G,c.ctx,i))if("GAME_EVENT"!=t.type||this.game.flow.canPlayerCallEvent(c.G,c.ctx,i))if(c._stateID===e){var v=b.getState().log||[];b.dispatch(t),c=b.getState(),this.transportAPI.sendAll(function(t){var e=u({},c,{G:a.game.playerView(c.G,c.ctx,t),ctx:u({},c.ctx,{_random:void 0}),log:void 0,deltalog:void 0,_undo:[],_redo:[],_initial:u({},c._initial,{_undo:[],_redo:[]})}),r=I(a.game.flow.redactedMoves,c.deltalog,t);return{type:"update",args:[n,e,r]}}),v=[].concat(f(v),f(c.deltalog));var g=u({},c,{log:v});this.executeSynchronously?this.storageAPI.set(p,g):await this.storageAPI.set(p,g)}else _("invalid stateID, was=[".concat(e,"], expected=[").concat(c._stateID,"]"));else _("event not processed - invalid playerID=[".concat(i,"]"));else _("move not processed - canPlayerMakeMove=false, playerID=[".concat(i,"]"))}},{key:"onSync",value:async function(t,n,r){var i,o=t;void 0===(i=this.executeSynchronously?this.storageAPI.get(o):await this.storageAPI.get(o))&&(i=function(t){var n=t.game,r=t.numPlayers,i=t.setupData;r||(r=2);var o=n.flow.ctx(r),a=n.seed;void 0===a&&(a=m.seed()),o._random={seed:a},o=function(t,e){return[].concat(b,f(e.plugins)).filter(function(t){return void 0!==t.ctx}).filter(function(t){return void 0!==t.ctx.setup}).forEach(function(n){t=n.ctx.setup(t,e)}),t}(o,n);var l=new w(o,n,o.currentPlayer),s=l.attachToContext(o),u=n.setup(s,i),c={G:u=v(u,s,n),ctx:o,_undo:[],_redo:[],_stateID:0,_initial:{}},p=n.flow.init({G:c.G,ctx:s});return c.G=p.G,c._undo=p._undo,p=l.updateAndDetach(p,!0),c.ctx=p.ctx,c._initial=e.parse(e.stringify(c)),c}({game:this.game,numPlayers:r}),this.executeSynchronously?(this.storageAPI.set(o,i),i=this.storageAPI.get(o)):(await this.storageAPI.set(o,i),i=await this.storageAPI.get(o)));var a=u({},i,{G:this.game.playerView(i.G,i.ctx,n),ctx:u({},i.ctx,{_random:void 0}),log:void 0,deltalog:void 0,_undo:[],_redo:[],_initial:u({},i._initial,{_undo:[],_redo:[]})}),l=I(this.game.flow.redactedMoves,i.log,n);this.transportAPI.send({playerID:n,type:"sync",args:[t,a,l]})}}]),t}(),Object.defineProperty(t,"__esModule",{value:!0})}(e,n("W8Xk"),n("V/h/"),n("ANjH"))},cihy:function(t,e,n){var r=n("mrSG").__extends,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n("gjnr")),l=o(n("ckdo"));e.Connection=function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e,void 0,{connect:n})||this;return r._enqueuedCalls=[],r}return r(e,t),e.prototype.onOpenCallback=function(e){if(t.prototype.onOpenCallback.call(this),this.binaryType="arraybuffer",this._enqueuedCalls.length>0){for(var n=0,r=this._enqueuedCalls;n<r.length;n++){var i=r[n];this[i[0]].apply(this,i[1])}this._enqueuedCalls=[]}},e.prototype.send=function(e){if(this.ws.readyState===a.default.OPEN)return t.prototype.send.call(this,l.encode(e));this._enqueuedCalls.push(["send",[e]])},e}(a.default)},ckdo:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("NbP2")),o=r(n("uwJ/"));e.decode=i.default,e.encode=o.default},gjnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n("ner8").createBackoff,o="undefined"!=typeof WebSocket?WebSocket:n(3),a=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.protocols=n,this.reconnectEnabled=!0,this.listeners={},this.backoff=i(r.backoff||"exponential",r),this.backoff.onReady=this.onBackoffReady.bind(this),(void 0===r.connect||r.connect)&&this.open()}return r(t,[{key:"open",value:function(){this.isReconnect=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.ws&&this.ws.binaryType;this.ws=new o(this.url,this.protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this),t&&(this.ws.binaryType=t)}},{key:"onBackoffReady",value:function(t,e){this.open(!0)}},{key:"onCloseCallback",value:function(t){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&t.code<3e3&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(t,e){void 0===t&&(t=1e3),this.reconnectEnabled=!1,this.ws.close(t,e)}},{key:"send",value:function(t){this.ws.send(t)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(t){this.ws.binaryType=t}},{key:"extensions",get:function(){return this.ws.extensions},set:function(t){this.ws.extensions=t}},{key:"protocol",get:function(){return this.ws.protocol},set:function(t){this.ws.protocol=t}},{key:"onclose",set:function(t){this.listeners.onclose=t},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(t){this.listeners.onerror=t},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(t){this.listeners.onmessage=t},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(t){this.listeners.onopen=t},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(t){this.listeners.onreconnect=t},get:function(){return this.listeners.onreconnect}}]),t}();a.CONNECTING=o.CONNECTING,a.OPEN=o.OPEN,a.CLOSING=o.CLOSING,a.CLOSED=o.CLOSED,e.default=a},gqVT:function(t,e,n){"use strict";function r(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function i(t,e,n){return new Promise(function(i,o){var a,l,s,u;n=n||{};var c=new XMLHttpRequest,f=n.headers||{};for(a in c.timeout=n.timeout,c.ontimeout=c.onerror=function(t){t.timeout="timeout"==t.type,o(t)},c.open(t,e),c.onload=function(){for(u=c.getAllResponseHeaders().trim().split(/[\r\n]+/),r(c,c);s=u.shift();)s=s.split(": "),c.headers[s.shift().toLowerCase()]=s.join(": ");if((s=c.headers["content-type"])&&~s.indexOf("application/json"))try{c.data=JSON.parse(c.data,n.reviver)}catch(t){return r(c,t),o(t)}(c.status>=400?o:i)(c)},(l=n.body)&&/Array|Object/.test(l.constructor)&&(f["content-type"]="application/json",l=JSON.stringify(l)),f)c.setRequestHeader(a,f[a]);c.send(l)})}n.r(e),n.d(e,"send",function(){return i}),n.d(e,"get",function(){return o}),n.d(e,"post",function(){return a}),n.d(e,"patch",function(){return l}),n.d(e,"del",function(){return s}),n.d(e,"put",function(){return u});var o=i.bind(i,"GET"),a=i.bind(i,"POST"),l=i.bind(i,"PATCH"),s=i.bind(i,"DELETE"),u=i.bind(i,"PUT")},hn5y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slot=function(){function t(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),this._enabled=!0,this._once=!1,this._priority=0,this._listener=t,this._once=n,this._signal=e,this._priority=r,this.verifyListener(t)}return t.prototype.execute0=function(){this._enabled&&(this._once&&this.remove(),this._params&&this._params.length?this._listener.apply(null,this._params):this._listener())},t.prototype.execute1=function(t){this._enabled&&(this._once&&this.remove(),this._params&&this._params.length?this._listener.apply(null,[t].concat(this._params)):this._listener(t))},t.prototype.execute=function(t){if(this._enabled){this._once&&this.remove(),this._params&&this._params.length&&(t=t.concat(this._params));var e=t.length;0===e?this._listener():1===e?this._listener(t[0]):2===e?this._listener(t[0],t[1]):3===e?this._listener(t[0],t[1],t[2]):this._listener.apply(null,t)}},Object.defineProperty(t.prototype,"listener",{get:function(){return this._listener},set:function(t){if(null==t)throw new Error("Given listener is null.\nDid you want to set enabled to false instead?");this.verifyListener(t),this._listener=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"once",{get:function(){return this._once},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[Slot listener: "+this._listener+", once: "+this._once+", priority: "+this._priority+", enabled: "+this._enabled+"]"},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},set:function(t){this._params=t},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this._signal.remove(this._listener)},t.prototype.verifyListener=function(t){if(null==t)throw new Error("Given listener is null.");if(null==this._signal)throw new Error("Internal signal reference has not been set yet.")},t}()},"i/Fw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapSchema=function(){return function t(e){void 0===e&&(e={});var n=this;for(var r in e)this[r]=e[r];Object.defineProperties(this,{$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},clone:{value:function(){var e=Object.assign(new t,n);return e.onAdd=n.onAdd,e.onRemove=n.onRemove,e.onChange=n.onChange,e}},triggerAll:{value:function(){if(n.onAdd)for(var t in n)n.onAdd(n[t],t)}},_indexes:{value:new Map,enumerable:!1,writable:!0},_updateIndexes:{value:function(){var t=0,e=new Map;for(var r in n)e.set(r,t++);n._indexes=e}}})}}()},ibR2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("5UGa");e.Schema=r.Schema;var i=n("i/Fw");e.MapSchema=i.MapSchema;var o=n("KFww");e.ArraySchema=o.ArraySchema;var a=n("m/et");e.Reflection=a.Reflection,e.ReflectionType=a.ReflectionType,e.ReflectionField=a.ReflectionField;var l=n("/F7G");e.type=l.type,e.filter=l.filter,e.Context=l.Context},"ik1+":function(t,e,n){!function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function p(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n=n&&n.hasOwnProperty("default")?n.default:n;var d="MAKE_MOVE",m="GAME_EVENT",y="REDO",b="RESET",v="SYNC",g="UNDO",w="UPDATE";function x(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function _(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function O(t,e){var n=new x(t),i=e&&e.state,o=n.next;return o.quick=o,i&&("object"==r(i)&&_(i,n),o.state=function(){return _(n,{})}),o}var I=function(){function t(e){i(this,t),this.state=e._random||{seed:"0"}}return a(t,[{key:"update",value:function(t){var e=s({},t.ctx,{_random:this.state});return s({},t,{ctx:e})}},{key:"attach",value:function(t){return s({},t,{random:this._api()})}},{key:"_random",value:function(){var t,e=this.state,n=(t=void 0===e.prngstate?new O(e.seed,{state:!0}):new O("",{state:e.prngstate}))();return this.state=s({},e,{prngstate:t.state()}),n}},{key:"_api",value:function(){var t=this._random.bind(this),e={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={},r=function(r){var i=e[r];n[r]=function(e){return void 0===e?Math.floor(t()*i)+1:h(new Array(e).keys()).map(function(){return Math.floor(t()*i)+1})}};for(var i in e)r(i);return s({},n,{Die:function(e,n){return void 0===e&&(e=6),void 0===n?Math.floor(t()*e)+1:h(new Array(n).keys()).map(function(){return Math.floor(t()*e)+1})},Number:function(){return t()},Shuffle:function(e){for(var n=e.slice(0),r=e.length,i=0,o=new Array(r);r;){var a=r*t()|0;o[i++]=n[a],n[a]=n[--r]}return o}})}}]),t}();I.detach=function(t){return f(t,["random"])},I.seed=function(){return(+new Date).toString(36).slice(-10)};var k=function(t,e,n,r){return{type:d,payload:{type:t,args:e,playerID:n,credentials:r}}},C=function(t,e,n,r){return{type:m,payload:{type:t,args:e,playerID:n,credentials:r}}},S=function(){function t(e,n){i(this,t),this.flow=e,this.playerID=n,this.dispatch=[]}return a(t,[{key:"attach",value:function(t){var e=this,n={},r=!0,i=!1,o=void 0;try{for(var a,l=function(){var t=a.value;n[t]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.dispatch.push({key:t,args:r})}},u=this.flow.eventNames[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)l()}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return s({},t,{events:n})}},{key:"update",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i=this.dispatch[Symbol.iterator]();!(e=i.next().done);e=!0){var o={type:m,payload:{type,args,playerID,credentials},automatic:!0};t=s({},t,this.flow.processGameEvent(t,o))}}catch(a){n=!0,r=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return t}}]),t}();S.detach=function(t){return f(t,["events"])};var P="INVALID_MOVE",A=function(){function t(){i(this,t),this._payload=void 0}return a(t,[{key:"_api",value:function(){var t=this;return{setPayload:function(e){t._payload=e}}}},{key:"attach",value:function(t){return s({},t,{log:this._api()})}},{key:"update",value:function(t){if(void 0===this._payload)return t;var e=t.deltalog;return e[e.length-1]=s({},e[e.length-1],{payload:this._payload}),this._payload=void 0,s({},t,{deltalog:e})}}],[{key:"detach",value:function(t){return f(t,["log"])}}]),t}(),D=function(){function t(e,n,r){i(this,t),this.random=new I(e),this.events=new S(n.flow,r),this.log=new A}return a(t,[{key:"attachToContext",value:function(t){var e=this.random.attach(t);return e=this.events.attach(e),this.log.attach(e)}},{key:"_update",value:function(t,e){var n=e?this.events.update(t):t;return n=this.random.update(n),this.log.update(n)}},{key:"updateAndDetach",value:function(e,n){var r=this._update(e,n);return r.ctx=t.detachAllFromContext(r.ctx),r}}],[{key:"detachAllFromContext",value:function(t){var e=I.detach(t);return e=S.detach(e),A.detach(e)}}]),t}(),E=function(){function t(e){var n=this,r=e.enumerate,o=e.seed;i(this,t),l(this,"enumerate",function(t,e,r){return n.enumerateFn(t,e,r).map(function(t){return void 0!==t.payload?t:void 0!==t.move?k(t.move,t.args,r):void 0!==t.event?C(t.event,t.args,r):void 0})}),this.enumerateFn=r,this.seed=o}return a(t,[{key:"random",value:function(t){var e;if(void 0!==this.seed){var n=null;e=(n=this.prngstate?new O("",{state:this.prngstate}):new O(this.seed,{state:!0}))(),this.prngstate=n.state()}else e=Math.random();return t?t.length?t[Math.floor(e*t.length)]:Math.floor(e*t):e}}]),t}(),j=function(t){function e(){return i(this,e),p(this,c(e).apply(this,arguments))}return u(e,E),a(e,[{key:"play",value:function(t,e){var n=this.enumerate(t.G,t.ctx,e);return{action:this.random(n)}}}]),e}(),M=function(t){function e(t){var n,r=t.enumerate,o=t.seed,a=t.objectives,l=t.game,u=t.iterations,f=t.playoutDepth;return i(this,e),void 0===a&&(a=function(){return{}}),(n=p(this,c(e).call(this,{enumerate:r,seed:o}))).objectives=a,n.reducer=function(t){var e=t.game,n=t.multiplayer;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:if(t=s({},t,{deltalog:[]}),n)return t;if(null!=r.payload.playerID&&!e.flow.canPlayerCallEvent(t.G,t.ctx,r.payload.playerID))return t;var i=new D(t.ctx,e,r.payload.playerID);t.ctx=i.attachToContext(t.ctx);var o=e.flow.processGameEvent(t,r);return s({},o=i.updateAndDetach(o,!0),{_stateID:t._stateID+1});case d:if(t=s({},t,{deltalog:[]}),!e.moveNames.includes(r.payload.type))return t;if(!e.flow.canMakeMove(t.G,t.ctx,r.payload.type))return t;if(null!=r.payload.playerID&&!e.flow.canPlayerMakeMove(t.G,t.ctx,r.payload.playerID))return t;var a=new D(t.ctx,e,r.payload.playerID),l=a.attachToContext(t.ctx),u=e.processMove(t.G,r.payload,l);if(u===P)return t;var c=a.updateAndDetach(s({},t,{deltalog:[{action:r,_stateID:t._stateID,turn:t.ctx.turn,phase:t.ctx.phase}]}),!1),f=c.ctx;return n&&!e.flow.optimisticUpdate(u,f,r.payload)&&(u=t.G),t=s({},c,{G:u,ctx:f,_stateID:t._stateID+1}),n?t:(l=a.attachToContext(t.ctx),t=e.flow.processMove(s({},t,{ctx:l}),r.payload),(t=a.updateAndDetach(t,!0))._undo[t._undo.length-1].ctx=t.ctx,t);case b:case w:case v:return r.state;case g:var p=t._undo,x=t._redo;if(p.length<2)return t;var _=p[p.length-1],O=p[p.length-2];return e.flow.canUndoMove(t.G,t.ctx,_.moveType)?s({},t,{G:O.G,ctx:O.ctx,_undo:p.slice(0,p.length-1),_redo:[_].concat(h(x))}):t;case y:var I=t._redo;if(0==I.length)return t;var k=I[0];return s({},t,{G:k.G,ctx:k.ctx,_undo:[].concat(h(t._undo),[k]),_redo:I.slice(1)});default:return t}}}({game:l}),n.iterations=u||1e3,n.playoutDepth=f||50,n}return u(e,E),a(e,[{key:"createNode",value:function(t){var e=t.state,n=t.parentAction,r=t.parent,i=t.playerID,o=e.G,a=e.ctx,l=[],s=[];if(void 0!==i)l=this.enumerate(o,a,i),s=this.objectives(o,a,i);else{var u=!0,c=!1,f=void 0;try{for(var p,h=a.actionPlayers[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;l=l.concat(this.enumerate(o,a,d)),s=s.concat(this.objectives(o,a,d))}}catch(m){c=!0,f=m}finally{try{u||null==h.return||h.return()}finally{if(c)throw f}}}return{state:e,parent:r,parentAction:n,actions:l,objectives:s,children:[],visits:0,value:0}}},{key:"select",value:function(t){if(t.actions.length>0)return t;if(0==t.children.length)return t;var e=null,n=0,r=!0,i=!1,o=void 0;try{for(var a,l=t.children[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,u=s.visits+Number.EPSILON,c=s.value/u+Math.sqrt(2*Math.log(t.visits)/u);(null==e||c>n)&&(n=c,e=s)}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return this.select(e)}},{key:"expand",value:function(t){var e=t.actions;if(0==e.length||void 0!==t.state.ctx.gameover)return t;var n=this.random(e.length),r=e[n];t.actions.splice(n,1);var i=this.reducer(t.state,r),o=this.createNode({state:i,parentAction:r,parent:t});return t.children.push(o),o}},{key:"playout",value:function(t){for(var e=this,n=t.state,i=function(t){var r=n.G,i=n.ctx,o=e.enumerate(r,i,i.actionPlayers[0]),a=e.objectives(r,i),l=Object.keys(a).reduce(function(t,e){var n=a[e];return n.checker(r,i)?t+n.weight:t},0);if(l>0)return{v:{score:l}};if(!o||0==o.length)return{v:void 0};var s=e.random(o.length),u=e.reducer(n,o[s]);n=u},o=0;o<this.playoutDepth&&void 0===n.ctx.gameover;o++){var a=i();if("object"===r(a))return a.v}return n.ctx.gameover}},{key:"backpropagate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.visits++,void 0!==e.score&&(t.value+=e.score),!0===e.draw&&(t.value+=.5),t.parentAction&&e.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,e)}},{key:"play",value:function(t,e){for(var n=this.createNode({state:t,playerID:e}),r=0;r<this.iterations;r++){var i=this.select(n),o=this.expand(i),a=this.playout(o);this.backpropagate(o,a)}var l=null,s=!0,u=!1,c=void 0;try{for(var f,p=n.children[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;(null==l||h.visits>l.visits)&&(l=h)}}catch(d){u=!0,c=d}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}return{action:l&&l.parentAction,metadata:n}}}]),e}();t.AI=function(t){var e=t.bot;return e||(e=M),{bot:e,enumerate:t.enumerate,visualize:t.visualize}},t.RandomBot=j,t.MCTSBot=M,Object.defineProperty(t,"__esModule",{value:!0})}(e,n("W8Xk"),n("V/h/"))},"m/et":function(t,e,n){var r=n("mrSG").__extends,i=n("mrSG").__decorate;Object.defineProperty(e,"__esModule",{value:!0});var o=n("/F7G"),a=n("5UGa"),l=n("KFww"),s=n("i/Fw"),u=new o.Context,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([o.type("string",u)],e.prototype,"name",void 0),i([o.type("string",u)],e.prototype,"type",void 0),i([o.type("uint8",u)],e.prototype,"referencedType",void 0),e}(a.Schema);e.ReflectionField=c;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new l.ArraySchema,e}return r(e,t),i([o.type("uint8",u)],e.prototype,"id",void 0),i([o.type([c],u)],e.prototype,"fields",void 0),e}(a.Schema);e.ReflectionType=f,e.Reflection=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new l.ArraySchema,e}return r(e,t),e.encode=function(t){var n=t.constructor,r=new e;r.rootType=n._typeid;var i=function(t,e){for(var n in e){var i=new c;i.name=n;var o=void 0;if("string"==typeof e[n])o=e[n];else{var a="function"==typeof e[n],l=Array.isArray(e[n]),s=void 0;a?(o="ref",s=e[n]):l?(o="array","string"==typeof e[n][0]?o+=":"+e[n][0]:s=e[n][0]):!l&&e[n].map&&(o="map","string"==typeof e[n].map?o+=":"+e[n].map:s=e[n].map),i.referencedType=s?s._typeid:255}i.type=o,t.fields.push(i)}r.types.push(t)},o=n._context.types;for(var a in o){var l=new f;l.id=Number(a),i(l,o[a]._schema)}return r.encodeAll()},e.decode=function(t){var n=new o.Context,i=new e;i.decode(t);var u=i.types.reduce(function(t,e){return t[e.id]=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(a.Schema),t},{});i.types.forEach(function(t,e){t.fields.forEach(function(e){var r=u[t.id];if(void 0!==e.referencedType){var i=u[e.referencedType];i||(i=e.type.split(":")[1]),0===e.type.indexOf("array")?o.type([i],n)(r.prototype,e.name):0===e.type.indexOf("map")?o.type({map:i},n)(r.prototype,e.name):"ref"===e.type&&o.type(i,n)(r.prototype,e.name)}else o.type(e.type,n)(r.prototype,e.name)})});var c=u[i.rootType],f=new c;for(var p in c._schema){var h=c._schema[p];if("string"!=typeof h){var d="function"==typeof h,m=Array.isArray(h),y=!m&&h.map;f[p]=m?new l.ArraySchema:y?new s.MapSchema:d?new h:void 0}}return f},i([o.type([f],u)],e.prototype,"types",void 0),i([o.type("uint8",u)],e.prototype,"rootType",void 0),e}(a.Schema)},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return l}),n.d(e,"__param",function(){return s}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return f}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return h}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return b}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return g}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return x}),n.d(e,"__importDefault",function(){return _});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function l(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function l(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,l)}s((r=r.apply(t,e||[])).next())})}function f(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||l(t,e)})})}function l(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(s,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function s(t){l("next",t)}function u(t){l("throw",t)}function c(t,e){t(e),o.shift(),o.length&&l(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function g(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=h(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}},mzIk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("oLdw");e.StateContainer=function(){function t(t){this.listeners=[],this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,":*":/(.*)/},this.state=t,this.reset()}return t.prototype.set=function(t){var e=r.compare(this.state,t);return this.state=t,this.checkPatches(e,this.listeners,this.defaultListener),e},t.prototype.registerPlaceholder=function(t,e){this.matcherPlaceholders[t]=e},t.prototype.listen=function(t,e,n){var i,o=this;"function"==typeof t?(i=[],e=t):i=t.split("/"),e.length>1&&console.warn(".listen() accepts only one parameter.");var a={callback:e,rawRules:i,rules:i.map(function(t){return"string"==typeof t?0===t.indexOf(":")?o.matcherPlaceholders[t]||o.matcherPlaceholders[":*"]:new RegExp("^"+t+"$"):t})};return 0===i.length?this.defaultListener=a:this.listeners.push(a),n&&this.checkPatches(r.compare({},this.state),[a]),a},t.prototype.removeListener=function(t){for(var e=this.listeners.length-1;e>=0;e--)this.listeners[e]===t&&this.listeners.splice(e,1)},t.prototype.removeAllListeners=function(){this.reset()},t.prototype.checkPatches=function(t,e,n){for(var r=0,i=e.length;r<i;r++)for(var o=e[r],a=t.length-1;a>=0;a--){var l=o&&this.getPathVariables(t[a],o);l&&(o.callback({path:l,rawPath:t[a].path,operation:t[a].operation,value:t[a].value}),t[a].matched=!0)}if(n)for(a=t.length-1;a>=0;a--)t[a].matched||n.callback(t[a])},t.prototype.getPathVariables=function(t,e){if(t.path.length!==e.rules.length)return!1;for(var n={},r=0,i=e.rules.length;r<i;r++){var o=t.path[r].match(e.rules[r]);if(!o||0===o.length||o.length>2)return!1;":"===e.rawRules[r].substr(0,1)&&(n[e.rawRules[r].substr(1)]=o[1])}return n},t.prototype.reset=function(){this.listeners=[]},t}()},ner8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBackoff=function(t,e){return new i(r[t],e)};var r={exponential:function(t,e){return Math.floor(Math.random()*Math.pow(2,t)*e)},fibonacci:function(t,e){if(t>(r=1))for(var n=1,r=2,i=2;i<t;i++){var o=n+r;n=r,r=o}return Math.floor(Math.random()*r*e)}};function i(t,e){this.func=t,this.attempts=0,this.delay=void 0!==e.initialDelay?e.initialDelay:100}i.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay))}},o1NI:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"makeMove",function(){return Fe}),n.d(r,"gameEvent",function(){return qe}),n.d(r,"automaticGameEvent",function(){return Ue}),n.d(r,"sync",function(){return Ve}),n.d(r,"update",function(){return Be}),n.d(r,"reset",function(){return $e}),n.d(r,"undo",function(){return We}),n.d(r,"redo",function(){return Ye});var i=n("8Y7J");class o{}var a=n("pMnS"),l=n("SVse"),s=n("ura0"),u=n("/q54");const c=(()=>(class{constructor(t,e){this.templateRef=t,this.viewContainer=e}set ngxInit(t){this.viewContainer.clear(),this.viewContainer.createEmbeddedView(this.templateRef,{ngxInit:t})}}))(),f=(()=>(class{}))();var p=n("VDRc"),h=n("IP0z");class d{}class m extends d{onClick(t){this.isCellActive(t)&&this.moves.clickCell(t)}isCellActive(t){return this.isActive&&null===this.G.cells[t]}}var y=i.ob({encapsulation:0,styles:[[".tic-tac-toe-board[_ngcontent-%COMP%]{border-collapse:collapse}.tic-tac-toe-board[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:25px;color:#555;width:50px;height:50px;line-height:50px;border:3px solid #aaa;background:#fff}.tic-tac-toe-board[_ngcontent-%COMP%]   td.active[_ngcontent-%COMP%]{cursor:pointer;background:#ddf2b4}.tic-tac-toe-board[_ngcontent-%COMP%]   td.active[_ngcontent-%COMP%]:hover{background:#eff}.winner[_ngcontent-%COMP%]{margin-top:25px;width:168px;text-align:center}"]],data:{}});function b(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,6,"td",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClick(t.context.ngxInit)&&r),r},null,null)),i.Cb(512,null,l.v,l.w,[i.q,i.r,i.k,i.C]),i.pb(2,278528,null,0,l.h,[l.v],{ngClass:[0,"ngClass"]},null),i.Bb(3,{active:0}),i.pb(4,933888,null,0,s.a,[i.k,u.i,u.f,l.v,[6,l.h]],{ngClass:[0,"ngClass"]},null),i.Bb(5,{active:0}),(t()(),i.Fb(6,null,["",""]))],function(t,e){var n=e.component,r=t(e,3,0,n.isCellActive(e.context.ngxInit));t(e,2,0,r);var i=t(e,5,0,n.isCellActive(e.context.ngxInit));t(e,4,0,i)},function(t,e){t(e,6,0,e.component.G.cells[e.context.ngxInit])})}function v(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,b)),i.pb(2,16384,null,0,c,[i.L,i.O],{ngxInit:[0,"ngxInit"]},null),(t()(),i.fb(0,null,null,0))],function(t,e){t(e,2,0,3*e.parent.context.$implicit+e.context.$implicit)},null)}function g(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,3,"tr",[],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,2,null,v)),i.pb(2,278528,null,0,l.j,[i.O,i.L,i.q],{ngForOf:[0,"ngForOf"]},null),i.Ab(3,3)],function(t,e){var n=t(e,3,0,0,1,2);t(e,2,0,n)},null)}function w(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,10,"div",[["fxLayout",""],["fxLayoutAlign","center center"],["style","height: 100%; width: 100%;"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(3,0,null,null,7,"div",[["fxLayout","column"],["fxLayoutAlign","center center"],["fxLayoutGap","16px"]],null,null,null,null,null)),i.pb(4,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(5,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(6,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(7,0,null,null,3,"table",[["class","tic-tac-toe-board"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,2,null,g)),i.pb(9,278528,null,0,l.j,[i.O,i.L,i.q],{ngForOf:[0,"ngForOf"]},null),i.Ab(10,3)],function(t,e){t(e,1,0,""),t(e,2,0,"center center"),t(e,4,0,"column"),t(e,5,0,"16px"),t(e,6,0,"center center");var n=t(e,10,0,0,1,2);t(e,9,0,n)},null)}function x(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,w,y)),i.pb(1,49152,null,0,m,[],null,null)],null,null)}var _=i.mb("ng-component",m,x,{G:"G",ctx:"ctx",moves:"moves",events:"events",playerID:"playerID",isActive:"isActive"},{},[]),O=n("Gi4r"),I=n("Xd0L"),k=n("cUpR"),C=i.ob({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function S(t){return i.Gb(2,[i.yb(null,0)],null,null)}var P=n("bujt"),A=n("Fwaw"),D=n("5GAg"),E=n("omvX"),j=n("BzsH"),M=n("/HVE"),N=i.ob({encapsulation:2,styles:["@media (-ms-high-contrast:active){.mat-toolbar{outline:solid 1px}}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}});function R(t){return i.Gb(2,[i.yb(null,0),i.yb(null,1)],null,null)}var G=n("iInd"),T=n("zZ8E");const{SERVER_HOST:L,SERVER_SCHEMA:z}=["local.com","localhost"].includes(window.location.hostname)?{SERVER_HOST:"localhost:8000",SERVER_SCHEMA:"ws"}:{SERVER_HOST:"everyturn.herokuapp.com",SERVER_SCHEMA:"wss"},F=`${z}://${L}`;var q,U=n("qXBG");!function(t){t.DISCONNECTED="DISCONNECTED",t.DISCONNECTING="DISCONNECTING",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED",t.UNKNOWN="UNKNOWN"}(q||(q={}));const V=(()=>{class t extends T.Client{constructor(t){super(F),this.auth0=t}get readyState(){return{[WebSocket.CLOSED]:q.DISCONNECTED,[WebSocket.CLOSING]:q.DISCONNECTING,[WebSocket.CONNECTING]:q.CONNECTING,[WebSocket.OPEN]:q.CONNECTED}[this.connection.readyState]||q.UNKNOWN}get isReady(){return this.connection.readyState===WebSocket.OPEN}getConnectedRoom(t){return this.rooms[t]}joinPromise(t,e){return new Promise((n,r)=>{const i=this.join(t,e);i.onJoin.addOnce(()=>{n(i)}),i.onError.addOnce(t=>{r(t)})})}joinWhenReady(t,e){return new Promise((n,r)=>{this.isReady?n(this.joinPromise(t,e)):(this.onOpen.addOnce(()=>{n(this.joinPromise(t,e))}),this.onError.addOnce(t=>{r(t)}))})}createGameRoom(t){const e={gameName:t},n=this.auth0.getAccessToken();return n&&(e.accessToken=n),this.joinWhenReady("base-room",e)}ngOnDestroy(){this.close()}}return t.ngInjectableDef=i.Ib({factory:function(){return new t(i.Mb(U.a))},token:t,providedIn:"root"}),t})();class B{constructor(t,e){this.auth=t,this.colyseus=e,t.isAuthenticated()&&(t.scheduleRenewal(),this.auth.getProfile().then(t=>{this.profile=t}))}login(){this.auth.login()}logout(){this.auth.logout()}}var $=i.ob({encapsulation:0,styles:[".not_connected[_ngcontent-%COMP%] {\n      color: #357cb2;\n      margin-top: 3px;\n      animation: 6s ease-out infinite opacityPulse;\n      opacity: 1;\n    }"],data:{}});function W(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,2,"mat-icon",[["class","not_connected mat-icon notranslate"],["role","img"]],[[8,"title",0],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,S,C)),i.pb(1,9158656,null,0,O.b,[i.k,O.d,[8,null],[2,O.a]],null,null),(t()(),i.Fb(-1,0,[" cloud_off "]))],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,e.component.colyseus.readyState,i.zb(e,1).inline,"primary"!==i.zb(e,1).color&&"accent"!==i.zb(e,1).color&&"warn"!==i.zb(e,1).color)})}function Y(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,2,"button",[["color","accent"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r},P.d,P.b)),i.pb(2,180224,null,0,A.b,[i.k,D.b,[2,E.a]],{color:[0,"color"]},null),(t()(),i.Fb(-1,0,["Show support by sigining up"]))],function(t,e){t(e,2,0,"accent")},function(t,e){t(e,1,0,i.zb(e,2).disabled||null,"NoopAnimations"===i.zb(e,2)._animationMode)})}function H(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,10,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,6,"span",[["fxLayout",""],["fxLayoutAlign","start center"],["fxLayoutGap","8px"]],null,null,null,null,null)),i.pb(2,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(3,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(4,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(5,0,null,null,0,"img",[["height","32px"],["style","border-radius: 50%; border: 2px solid white;"],["width","32px"]],[[8,"src",4]],null,null,null,null)),(t()(),i.qb(6,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(7,null,["Hello ","!"])),(t()(),i.qb(8,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logout()&&r),r},P.d,P.b)),i.pb(9,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),(t()(),i.Fb(-1,0,["Logout"]))],function(t,e){t(e,2,0,""),t(e,3,0,"8px"),t(e,4,0,"start center")},function(t,e){var n=e.component;t(e,5,0,null==n.profile?null:n.profile.picture),t(e,7,0,null==n.profile?null:n.profile.nickname),t(e,8,0,i.zb(e,9).disabled||null,"NoopAnimations"===i.zb(e,9)._animationMode)})}function K(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i.Fb(-1,null,["Loading profile..."]))],null,null)}function J(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,10,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,8,"span",[["fxLayout",""],["fxLayoutAlign","start center"],["fxLayoutGap","16px"]],null,null,null,null,null)),i.pb(2,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),i.pb(3,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(4,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(5,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.fb(16777216,null,null,1,null,H)),i.pb(7,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,K)),i.pb(9,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.qb(10,0,null,null,0,"span",[],null,null,null,null,null))],function(t,e){t(e,2,0,!!e.component.profile),t(e,3,0,""),t(e,4,0,"16px"),t(e,5,0,"start center"),t(e,7,0,!0),t(e,9,0,!1)},null)}function X(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,28,"div",[["fxLayout","column"],["style","height: 100%;"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),(t()(),i.qb(2,0,null,null,22,"mat-toolbar",[["class","mat-elevation-z6 mat-toolbar"],["fxFlex","none"],["fxLayout",""],["fxLayoutAlign","start center"],["fxLayoutGap","16px"],["style","z-index: 1"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,R,N)),i.pb(3,4243456,null,1,j.a,[i.k,M.a,l.c],null,null),i.Db(603979776,1,{_toolbarRows:1}),i.pb(5,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(6,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(7,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(8,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(9,0,null,0,1,"span",[["fxFlex","64px"]],null,null,null,null,null)),i.pb(10,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(11,0,null,0,3,"a",[["disableRipple",""],["mat-button",""],["routerLink","/"],["style","font-variant-caps: small-caps;\n                                                  font-weight: bold;\n                                                  letter-spacing: 0.23em;\n                                                  font-size: 1.22em;\n                                                  color: #2583b9;"]],[[1,"target",0],[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i.zb(t,12).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===e&&(r=!1!==i.zb(t,13)._haltDisabledEvents(n)&&r),r},P.c,P.a)),i.pb(12,671744,null,0,G.l,[G.k,G.a,l.g],{routerLink:[0,"routerLink"]},null),i.pb(13,180224,null,0,A.a,[D.b,i.k,[2,E.a]],{disableRipple:[0,"disableRipple"]},null),(t()(),i.Fb(-1,0,[" EveryTurn "])),(t()(),i.fb(16777216,null,0,1,null,W)),i.pb(16,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(17,0,null,0,1,"span",[["fxFlex",""]],null,null,null,null,null)),i.pb(18,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(19,0,null,0,5,null,null,null,null,null,null,null)),i.pb(20,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.fb(16777216,null,null,1,null,Y)),i.pb(22,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,J)),i.pb(24,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.qb(25,0,null,null,3,"div",[["fxFlex",""],["style","min-width: 100%;\n                         overflow-x: auto;\n                         /*noinspection CssUnknownTarget*/\n                         background-image: url('/assets/background.png');\n                         background-size: cover;"]],null,null,null,null,null)),i.pb(26,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(27,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i.pb(28,212992,null,0,G.n,[G.b,i.O,i.j,[8,null],i.h],null,null)],function(t,e){var n=e.component;t(e,1,0,"column"),t(e,5,0,""),t(e,6,0,"16px"),t(e,7,0,"start center"),t(e,8,0,"none"),t(e,10,0,"64px"),t(e,12,0,"/"),t(e,13,0,""),t(e,16,0,!n.colyseus.isReady),t(e,18,0,""),t(e,20,0,n.auth.isAuthenticated()),t(e,22,0,!1),t(e,24,0,!0),t(e,26,0,""),t(e,28,0)},function(t,e){t(e,2,0,i.zb(e,3)._toolbarRows.length>0,0===i.zb(e,3)._toolbarRows.length),t(e,11,0,i.zb(e,12).target,i.zb(e,12).href,i.zb(e,13).disabled?-1:i.zb(e,13).tabIndex||0,i.zb(e,13).disabled||null,i.zb(e,13).disabled.toString(),"NoopAnimations"===i.zb(e,13)._animationMode)})}function Q(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,X,$)),i.pb(1,49152,null,0,B,[U.a,V],null,null)],null,null)}var Z=i.mb("ng-component",B,Q,{},{},[]),tt=n("mrSG"),et=n("0Grr"),nt=n("ik1+");const rt=Object(nt.AI)({enumerate:t=>{const e=[];for(let n=0;n<9;n++)null===t.cells[n]&&e.push({move:"clickCell",args:[n]});return e}}),it={"tic-tac-toe":{Game:Object(et.Game)({name:"tic-tac-toe",setup:()=>({cells:Array(9).fill(null)}),moves:{clickCell(t,e,n){const r=[...t.cells];return null===r[n]?(r[n]=e.currentPlayer,Object.assign({},t,{cells:r})):et.INVALID_MOVE}},flow:{movesPerTurn:1,endGameIf:(t,e)=>!function(t){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const n of e){const e=t[n[0]];let r=e;for(const i of n)if(t[i]!=e){r=null;break}if(null!=r)return!0}return!1}(t.cells)?t.cells.every(t=>null!==t)?{draw:!0}:void 0:{winner:e.currentPlayer},endGame:!0}}),ai:rt}};function ot(t){return it[t]}class at{constructor(t,e,n){this.router=t,this.route=e,this.colyseus=n,this.gameRecords=Object.values(it)}play(t){return tt.__awaiter(this,void 0,void 0,function*(){const e=yield this.colyseus.createGameRoom(t);this.router.navigate([t,"rooms",e.id],{relativeTo:this.route})})}playSingleplayer(t){this.router.navigate([t,"singleplayer"],{relativeTo:this.route})}}var lt=i.ob({encapsulation:2,styles:[],data:{animation:[{type:7,name:"fadeInUp",definitions:[{type:1,expr:":enter",animation:{type:10,animation:{type:8,animation:{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:1},offset:null}]},timings:"{{ timing }}s {{ delay }}s"},options:{params:{timing:1,delay:0,a:"100%",b:0}}},options:{params:{timing:"0.3",a:"12px"}}},options:null}],options:{}}]}});function st(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,11,"div",[["fxLayout",""],["fxLayoutAlign","space-between center"],["fxLayoutGap","26px"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(3,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(4,0,null,null,1,"span",[["style",""]],null,null,null,null,null)),(t()(),i.Fb(5,null,["",""])),(t()(),i.qb(6,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.play(t.context.$implicit.Game.name)&&r),r},P.d,P.b)),i.pb(7,180224,null,0,A.b,[i.k,D.b,[2,E.a]],{disabled:[0,"disabled"]},null),(t()(),i.Fb(8,0,[" "," "])),(t()(),i.qb(9,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.playSingleplayer(t.context.$implicit.Game.name)&&r),r},P.d,P.b)),i.pb(10,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),(t()(),i.Fb(-1,0,[" Single Player "]))],function(t,e){var n=e.component;t(e,1,0,""),t(e,2,0,"26px"),t(e,3,0,"space-between center"),t(e,7,0,!n.colyseus.isReady)},function(t,e){var n=e.component;t(e,5,0,e.context.$implicit.Game.name),t(e,6,0,i.zb(e,7).disabled||null,"NoopAnimations"===i.zb(e,7)._animationMode),t(e,8,0,n.colyseus.isReady?"Multiplayer":"Sorry, can't play while server is down"),t(e,9,0,i.zb(e,10).disabled||null,"NoopAnimations"===i.zb(e,10)._animationMode)})}function ut(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,11,"section",[["fxFlexFill",""],["fxLayout",""],["fxLayoutAlign","center center"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(3,671744,null,0,p.e,[i.k,u.i,p.f,u.f],null,null),(t()(),i.qb(4,0,null,null,7,"div",[["style","min-height: 80%"]],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,6,"div",[["class","mat-elevation-z8"],["fxLayout","column"],["fxLayoutAlign","start center"],["style","background-color: white; border: 4px dashed #fa4f4f; padding: 16px 32px 38px 32px;"]],[[24,"@fadeInUp",0]],null,null,null,null)),i.pb(6,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(7,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(8,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Checkout Our games"])),(t()(),i.fb(16777216,null,null,1,null,st)),i.pb(11,278528,null,0,l.j,[i.O,i.L,i.q],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,1,0,""),t(e,2,0,"center center"),t(e,6,0,"column"),t(e,7,0,"start center"),t(e,11,0,n.gameRecords)},function(t,e){t(e,5,0,void 0)})}function ct(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,ut,lt)),i.pb(1,49152,null,0,at,[G.k,G.a,V],null,null)],null,null)}var ft=i.mb("ng-component",at,ct,{},{},[]);class pt{constructor(t,e){this.template=t,this.vcRef=e,this.view=this.vcRef.createEmbeddedView(this.template)}ngAfterViewChecked(){this.view.detach()}}class ht{}var dt=n("XNiG"),mt=n("1G5W");const yt=new i.o("ComponentInjector"),bt=(()=>(class{constructor(t){this.componentOutlet=t}get componentRef(){return this.componentOutlet._componentRef}}))();function vt(t){return new i.H(void 0,t,!0)}function gt(t,e){return n=>e(n,function(t,e=!1){return e?vt(t.currentValue):new i.H(t.previousValue,t.currentValue,!1)}(n,t))}const wt={isFirstChanges:!1,onlyNewChanges:!1};function xt(t=wt){return t.onlyNewChanges?(e=t.isFirstChanges,t=>gt(e,(e,n)=>{t[e.key]||(t[e.key]=n)})):function(t){return e=>gt(t,(t,n)=>e[t.key]=n)}(t.isFirstChanges);var e}function _t(){}const Ot=xt({isFirstChanges:!0}),It=xt({onlyNewChanges:!0}),kt=(()=>(class{constructor(t,e){this._differs=t,this._cfr=e,this.checkInit=this.failInit,this._lastComponentInst=null,this._inputsDiffer=this._differs.find({}).create(),this._compFactory=null,this._outputsShouldDisconnect$=new dt.a,this._outputsChanged=(()=>!1)}get _compRef(){return this._compInjector.componentRef}get _componentInst(){return this._compRef?this._compRef.instance:null}get _componentInstChanged(){return this._lastComponentInst!==this._componentInst&&(this._lastComponentInst=this._componentInst,!0)}get _compCdr(){return this._compRef?this._compRef.injector.get(i.h):null}ngOnDestroy(){this._disconnectOutputs()}init(t,e={}){if(this.checkInit=t?_t:this.failInit,this._compInjector=t,e.trackOutputChanges){const t=this._differs.find({}).create();this._outputsChanged=(e=>!!t.diff(e))}}update(t,e,n,r){this.checkInit(),this.updateIO(t,e);const i=this._componentInstChanged;if(i||n){const t=this._getInputsChanges(this._inputs);t&&this._updateInputChanges(t),this.updateInputs(i||!this._lastInputChanges)}(i||r)&&this.bindOutputs()}maybeUpdate(){if(this.checkInit(),this._componentInstChanged)return this.updateInputs(!0),void this.bindOutputs();if(this._outputsChanged(this._outputs)&&this.bindOutputs(),!this._inputs)return;const t=this._getInputsChanges(this._inputs);if(t){const e=!!this._lastInputChanges;this._updateInputChanges(t),e&&this.updateInputs()}}updateIO(t,e){this._inputs=t,this._outputs=e}updateInputs(t=!1){t&&this._updateCompFactory();const e=this._componentInst;let n=this._inputs;n&&e&&(n=this._resolveInputs(n),Object.keys(n).forEach(t=>e[t]=n[t]),this._compCdr&&this._compCdr.markForCheck(),this.notifyOnInputChanges(this._lastInputChanges,t))}bindOutputs(){this._disconnectOutputs();const t=this._componentInst;let e=this._outputs;e&&t&&(e=this._resolveOutputs(e),Object.keys(e).filter(e=>t[e]).forEach(n=>t[n].pipe(Object(mt.a)(this._outputsShouldDisconnect$)).subscribe(e[n])))}notifyOnInputChanges(t={},e){this._componentInst.ngOnChanges&&(e&&(t=this._collectFirstChanges()),this._componentInst.ngOnChanges(t))}_disconnectOutputs(){this._outputsShouldDisconnect$.next()}_getInputsChanges(t){return this._inputsDiffer.diff(this._inputs)}_updateInputChanges(t){this._lastInputChanges=this._collectChangesFromDiffer(t)}_collectFirstChanges(){const t={},e=this._inputs;return Object.keys(e).forEach(n=>t[n]=vt(e[n])),this._resolveChanges(t)}_collectChangesFromDiffer(t){const e={};return t.forEachAddedItem(Ot(e)),t.forEachItem(It(e)),this._resolveChanges(e)}_resolveCompFactory(){try{try{return this._cfr.resolveComponentFactory(this._compRef.componentType)}catch(t){return this._cfr.resolveComponentFactory(this._compRef.instance.constructor)}}catch(t){return null}}_updateCompFactory(){this._compFactory=this._resolveCompFactory()}_resolveInputs(t){return this._compFactory?this._remapIO(t,this._compFactory.inputs):t}_resolveOutputs(t){return this._compFactory?this._remapIO(t,this._compFactory.outputs):t}_resolveChanges(t){return this._compFactory?this._remapIO(t,this._compFactory.inputs):t}_remapIO(t,e){const n={};return Object.keys(t).forEach(r=>{const i=this._findPropByTplInMapping(r,e)||r;n[i]=t[r]}),n}_findPropByTplInMapping(t,e){for(const n of e)if(n.templateName===t)return n.propName;return null}failInit(){throw Error("IoService: ComponentInjector was not set! Please call init() method!")}}))(),Ct=(()=>(class{constructor(t,e){this.differs=t,this.cfr=e}create(){return new kt(this.differs,this.cfr)}}))(),St=new i.o("WindowRef"),Pt=(()=>(class{constructor(t){this.injector=t,this.nativeWindow=this.injector.get(St,null)}}))(),At=(()=>(class{constructor(t,e){this._vcr=t,this._cfr=e,this.ndcDynamicCreated=new i.m}ngOnChanges(t){t.ndcDynamicComponent&&this.createDynamicComponent()}createDynamicComponent(){this._vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this._vcr.createComponent(this._cfr.resolveComponentFactory(this.ndcDynamicComponent),0,this._resolveInjector(),this.ndcDynamicContent),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let t=this.ndcDynamicInjector||this._vcr.parentInjector;return this.ndcDynamicProviders&&(t=i.p.create({providers:this.ndcDynamicProviders,parent:t})),t}}))(),Dt=(()=>(class{constructor(t,e,n,r){this._injector=t,this.ioService=e,this._componentInjectorType=n,this._componentOutletInjector=r,this._componentInjector=this._injector.get(this._componentInjectorType,null),this.ioService.init(this._compInjector)}get _inputs(){return this.ndcDynamicInputs||this.ngComponentOutletNdcDynamicInputs}get _outputs(){return this.ndcDynamicOutputs||this.ngComponentOutletNdcDynamicOutputs}get _compInjector(){return this._componentOutletInjector||this._componentInjector}ngOnChanges(t){this.ioService.update(this._inputs,this._outputs,this._inputsChanged(t),this._outputsChanged(t))}ngDoCheck(){this.ioService.maybeUpdate()}_inputsChanged(t){return"ngComponentOutletNdcDynamicInputs"in t||"ndcDynamicInputs"in t}_outputsChanged(t){return"ngComponentOutletNdcDynamicOutputs"in t||"ndcDynamicOutputs"in t}}))();function Et(){return window}const jt=(()=>{class t{static withComponents(e,n=At){return{ngModule:t,providers:[{provide:i.a,useValue:e,multi:!0},{provide:yt,useValue:n},Ct,{provide:St,useFactory:Et},Pt]}}}return t})();class Mt{}var Nt=i.ob({encapsulation:0,styles:[[".dot-wave[_ngcontent-%COMP%]{display:inline-block;position:relative;text-align:center;margin-left:4px}.dot-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:4px;height:4px;border-radius:50%;margin-right:3px;background:#fa4f4f;-webkit-animation:1.3s linear infinite wave;animation:1.3s linear infinite wave}.dot-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.dot-wave[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.9s;animation-delay:-.9s}@-webkit-keyframes wave{0%,100%,60%{-webkit-transform:initial;transform:initial}30%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}}@keyframes wave{0%,100%,60%{-webkit-transform:initial;transform:initial}30%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}}"]],data:{}});function Rt(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"strong",[["style","color: rgb(250, 79, 79);"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Waiting for players"])),(t()(),i.qb(2,0,null,null,3,"div",[["class","dot-wave"]],null,null,null,null,null)),(t()(),i.qb(3,0,null,null,0,"span",[["class","dot"]],null,null,null,null,null)),(t()(),i.qb(4,0,null,null,0,"span",[["class","dot"]],null,null,null,null,null)),(t()(),i.qb(5,0,null,null,0,"span",[["class","dot"]],null,null,null,null,null))],null,null)}var Gt=n("gavF"),Tt=n("QQfA"),Lt=n("zMNK"),zt=n("hOhj"),Ft=i.ob({encapsulation:2,styles:[".mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}@media (-ms-high-contrast:active){.mat-menu-item-highlighted,.mat-menu-item.cdk-keyboard-focused,.mat-menu-item.cdk-program-focused{outline:dotted 1px}}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:{type:3,steps:[{type:11,selector:".mat-menu-content, .mat-mdc-menu-content",animation:{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"100ms linear"},options:null},{type:4,styles:{type:6,styles:{transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"}],options:null},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function qt(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,4,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.start"],[null,"@transformMenu.done"]],function(t,e,n){var r=!0,i=t.component;return"keydown"===e&&(r=!1!==i._handleKeydown(n)&&r),"click"===e&&(r=!1!==i.closed.emit("click")&&r),"@transformMenu.start"===e&&(r=!1!==i._onAnimationStart(n)&&r),"@transformMenu.done"===e&&(r=!1!==i._onAnimationDone(n)&&r),r},null,null)),i.Cb(512,null,l.v,l.w,[i.q,i.r,i.k,i.C]),i.pb(2,278528,null,0,l.h,[l.v],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),i.qb(3,0,null,null,1,"div",[["class","mat-menu-content"]],null,null,null,null,null)),i.yb(null,0)],function(t,e){t(e,2,0,"mat-menu-panel",e.component._classList)},function(t,e){t(e,0,0,e.component._panelAnimationState)})}function Ut(t){return i.Gb(2,[i.Db(671088640,1,{templateRef:0}),(t()(),i.fb(0,[[1,2]],null,0,null,qt))],null,null)}var Vt=i.ob({encapsulation:2,styles:[],data:{}});function Bt(t){return i.Gb(2,[i.yb(null,0),(t()(),i.qb(1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),i.pb(2,212992,null,0,I.q,[i.k,i.x,M.a,[2,I.g],[2,E.a]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var n=e.component;t(e,2,0,n.disableRipple||n.disabled,n._getHostElement())},function(t,e){t(e,1,0,i.zb(e,2).unbounded)})}var $t=n("Q+lL"),Wt=n("02hT");n("s7LF");var Yt=i.ob({encapsulation:2,styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],data:{}});function Ht(t){return i.Gb(2,[i.yb(null,0)],null,null)}var Kt,Jt=i.ob({encapsulation:2,styles:[],data:{}});function Xt(t){return i.Gb(2,[(t()(),i.qb(0,0,null,null,6,"div",[["class","mat-list-item-content"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"div",[["class","mat-list-item-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),i.pb(2,212992,null,0,I.q,[i.k,i.x,M.a,[2,I.g],[2,E.a]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null),i.yb(null,0),(t()(),i.qb(4,0,null,null,1,"div",[["class","mat-list-text"]],null,null,null,null,null)),i.yb(null,1),i.yb(null,2)],function(t,e){var n=e.component;t(e,2,0,n._isRippleDisabled(),n._getHostElement())},function(t,e){t(e,1,0,i.zb(e,2).unbounded)})}!function(t){t.CAN_MOVE="CAN_MOVE",t.WAITING="WAITING",t.DONE_WINNER="DONE_WINNER",t.DONE_INDIFFERENT="DONE_INDIFFERENT"}(Kt||(Kt={}));class Qt{constructor(){this.PLAYER_STATUS=Kt}}var Zt=i.ob({encapsulation:0,styles:[[".player-status[_ngcontent-%COMP%]{letter-spacing:.1em;font-style:italic;color:#bcbc5e}.player-status[_ngcontent-%COMP%]   .player-status__waiting[_ngcontent-%COMP%]{color:#c3c3c3}.player-status[_ngcontent-%COMP%]   .player-status__your-turn[_ngcontent-%COMP%]{color:#46ce26;-webkit-animation:6s ease-out infinite opacityPulse;animation:6s ease-out infinite opacityPulse;opacity:1}.shadow-pop-tr[_ngcontent-%COMP%]{-webkit-animation:.3s cubic-bezier(.47,0,.745,.715) both shadow-pop-tr;animation:.3s cubic-bezier(.47,0,.745,.715) both shadow-pop-tr}@-webkit-keyframes shadow-pop-tr{0%{box-shadow:0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e;-webkit-transform:translateX(0) translateY(0);transform:translateX(0) translateY(0);border:none}100%{box-shadow:-1px 1px #3e3e3e,-2px 2px #3e3e3e;-webkit-transform:translateX(2px) translateY(-2px);transform:translateX(2px) translateY(-2px);border:1px solid #3e3e3e}}@keyframes shadow-pop-tr{0%{box-shadow:0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e,0 0 #3e3e3e;-webkit-transform:translateX(0) translateY(0);transform:translateX(0) translateY(0);border:none}100%{box-shadow:-1px 1px #3e3e3e,-2px 2px #3e3e3e;-webkit-transform:translateX(2px) translateY(-2px);transform:translateX(2px) translateY(-2px);border:1px solid #3e3e3e}}"]],data:{}});function te(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"span",[["class","player-status__your-turn"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Your Turn"]))],null,null)}function ee(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Current Player"]))],null,null)}function ne(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,5,null,null,null,null,null,null,null)),i.pb(2,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.fb(16777216,null,null,1,null,te)),i.pb(4,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,ee)),i.pb(6,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(0,null,null,0))],function(t,e){t(e,2,0,e.component.isMe),t(e,4,0,!0),t(e,6,0,!1)},null)}function re(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"span",[["class","player-status__waiting"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Waiting..."]))],null,null)}function ie(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.isMe?"You Won!":"Winner")})}function oe(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["\xa0"]))],null,null)}function ae(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,30,"mat-list-item",[["class","mat-list-item"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,Xt,Jt)),i.Cb(512,null,l.v,l.w,[i.q,i.r,i.k,i.C]),i.pb(2,278528,null,0,l.h,[l.v],{ngClass:[0,"ngClass"]},null),i.Bb(3,{"shadow-pop-tr":0}),i.pb(4,1228800,null,3,$t.c,[i.k,i.h,[2,$t.g],[2,$t.a]],null,null),i.Db(603979776,1,{_lines:1}),i.Db(603979776,2,{_avatar:0}),i.Db(603979776,3,{_icon:0}),i.pb(8,933888,null,0,s.a,[i.k,u.i,u.f,l.v,[6,l.h]],{ngClass:[0,"ngClass"]},null),i.Bb(9,{"shadow-pop-tr":0}),(t()(),i.qb(10,0,null,0,6,"img",[["class","mat-list-avatar"],["matListAvatar",""],["style","border: 2px solid;"]],[[8,"src",4]],null,null,null,null)),i.Cb(512,null,l.x,l.y,[i.k,i.r,i.C]),i.pb(12,278528,null,0,l.n,[l.x],{ngStyle:[0,"ngStyle"]},null),i.Bb(13,{"border-color":0}),i.pb(14,16384,[[2,4]],0,$t.b,[],null,null),i.pb(15,933888,null,0,s.b,[i.k,u.i,u.f,l.x,k.b,[6,l.n],[2,u.g],i.z],{ngStyle:[0,"ngStyle"]},null),i.Bb(16,{"border-color":0}),(t()(),i.qb(17,0,null,1,2,"h3",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),i.pb(18,16384,[[1,4]],0,I.i,[],null,null),(t()(),i.Fb(19,null,[" "," "])),(t()(),i.qb(20,0,null,1,10,"p",[["class","player-status mat-line"],["matLine",""]],null,null,null,null,null)),i.pb(21,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),i.pb(22,16384,[[1,4]],0,I.i,[],null,null),(t()(),i.fb(16777216,null,null,1,null,ne)),i.pb(24,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,re)),i.pb(26,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,ie)),i.pb(28,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,oe)),i.pb(30,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var n=e.component,r=t(e,3,0,n.status===n.PLAYER_STATUS.CAN_MOVE);t(e,2,0,r);var i=t(e,9,0,n.status===n.PLAYER_STATUS.CAN_MOVE);t(e,8,0,i);var o=t(e,13,0,n.player.color);t(e,12,0,o);var a=t(e,16,0,n.player.color);t(e,15,0,a),t(e,21,0,n.status),t(e,24,0,n.PLAYER_STATUS.CAN_MOVE),t(e,26,0,n.PLAYER_STATUS.WAITING),t(e,28,0,n.PLAYER_STATUS.DONE_WINNER),t(e,30,0,n.PLAYER_STATUS.DONE_INDIFFERENT)},function(t,e){var n=e.component;t(e,0,0,i.zb(e,4)._avatar||i.zb(e,4)._icon,i.zb(e,4)._avatar||i.zb(e,4)._icon),t(e,10,0,n.player.profile.picture),t(e,19,0,n.player.profile.nickname)})}class le{getPlayerStatus(t){return null!=this.gameover?this.gameover.winner===t.playerID?Kt.DONE_WINNER:Kt.DONE_INDIFFERENT:this.canPlayerMakeMove(t.playerID)?Kt.CAN_MOVE:Kt.WAITING}}var se=i.ob({encapsulation:2,styles:[],data:{}});function ue(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"et-player-list-item",[],null,null,null,ae,Zt)),i.pb(1,49152,null,0,Qt,[],{isMe:[0,"isMe"],status:[1,"status"],player:[2,"player"]},null)],function(t,e){var n=e.component;t(e,1,0,e.context.$implicit.playerID===n.playerID,n.getPlayerStatus(e.context.$implicit),e.context.$implicit)},null)}function ce(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,6,"mat-list",[["class","mat-list mat-list-base"],["dense",""],["style","margin-right: 2px;"]],null,null,null,Ht,Yt)),i.pb(1,704512,null,0,$t.a,[i.k],null,null),(t()(),i.qb(2,0,null,0,2,"h3",[["class","mat-subheader"],["matSubheader",""]],null,null,null,null,null)),i.pb(3,16384,null,0,$t.f,[],null,null),(t()(),i.Fb(-1,null,["Players"])),(t()(),i.fb(16777216,null,0,1,null,ue)),i.pb(6,278528,null,0,l.j,[i.O,i.L,i.q],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,6,0,e.component.players)},null)}class fe{constructor(){this.playerID=null,this.leave=new i.m,this.toggleDebug=new i.m,this.playAgain=new i.m,this.canPlayerMakeMove=(t=>this.isRoomReady&&this.game.flow.canPlayerMakeMove(this.gameState.G,this.gameState.ctx,t))}isDone(){return void 0!==this.gameState.ctx.gameover}getWinnerNickName(){return this.players.find(t=>t.playerID===this.gameState.ctx.gameover.winner).profile.nickname}}var pe=i.ob({encapsulation:2,styles:[],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:1,expr:":enter",animation:{type:10,animation:{type:8,animation:{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:1},offset:null}]},timings:"{{ timing }}s {{ delay }}s"},options:{params:{timing:1,delay:0,a:0,b:0}}},options:{params:{timing:"0.5"}}},options:null}],options:{}}]}});function he(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),i.qb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Winner: "])),(t()(),i.Fb(3,null,["","! "]))],null,function(t,e){t(e,3,0,e.component.getWinnerNickName())})}function de(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,he)),i.pb(2,8404992,null,0,pt,[i.L,i.O],null,null),(t()(),i.fb(0,null,null,0))],null,null)}function me(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),i.Fb(-1,null,[" Draw! "]))],null,null)}function ye(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,14,"div",[["fxLayout",""],["fxLayoutAlign","center center"],["style","position: absolute; height: 100%; width: 100%; top: 0; left: 0; color: white; background: rgba(0,0,0,0.8);"]],[[24,"@fadeIn",0]],null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(3,0,null,null,11,"div",[["fxLayout","column"],["fxLayoutAlign","start center"],["fxLayoutGap","16px"]],null,null,null,null,null)),i.pb(4,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(5,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(6,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(7,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,de)),i.pb(9,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,1,null,me)),i.pb(11,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(12,0,null,null,2,"button",[["color","accent"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.playAgain.emit()&&r),r},P.d,P.b)),i.pb(13,180224,null,0,A.b,[i.k,D.b,[2,E.a]],{color:[0,"color"]},null),(t()(),i.Fb(-1,0,["Play Again"]))],function(t,e){var n=e.component;t(e,1,0,""),t(e,2,0,"center center"),t(e,4,0,"column"),t(e,5,0,"16px"),t(e,6,0,"start center"),t(e,9,0,n.gameState.ctx.gameover.winner),t(e,11,0,n.gameState.ctx.gameover.draw),t(e,13,0,"accent")},function(t,e){t(e,0,0,void 0),t(e,12,0,i.zb(e,13).disabled||null,"NoopAnimations"===i.zb(e,13)._animationMode)})}function be(t){return i.Gb(0,[(t()(),i.fb(0,null,null,0))],null,null)}function ve(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,7,"div",[["style","height: 400px; width: 600px;"]],null,null,null,null,null)),(t()(),i.fb(16777216,null,null,1,null,ye)),i.pb(2,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.fb(16777216,null,null,4,null,be)),i.pb(4,671744,null,0,l.i,[i.O],{ngComponentOutlet:[0,"ngComponentOutlet"]},null),i.Cb(131584,null,kt,kt,[i.r,i.j]),i.pb(6,16384,null,0,bt,[l.i],null,null),i.pb(7,802816,null,0,Dt,[i.p,kt,yt,[2,bt]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null)],function(t,e){var n=e.component;t(e,2,0,n.isDone()),t(e,4,0,n.board),t(e,7,0,n.getBoardInputs())},null)}function ge(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"et-waiting",[],null,null,null,Rt,Nt)),i.pb(1,49152,null,0,Mt,[],null,null)],null,null)}function we(t){return i.Gb(0,[(t()(),i.qb(0,16777216,null,null,5,"button",[["aria-haspopup","true"],["mat-icon-button",""],["style","position: absolute; top: 6px; right: 4px;"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==i.zb(t,2)._handleMousedown(n)&&r),"keydown"===e&&(r=!1!==i.zb(t,2)._handleKeydown(n)&&r),"click"===e&&(r=!1!==i.zb(t,2)._handleClick(n)&&r),r},P.d,P.b)),i.pb(1,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),i.pb(2,1196032,null,0,Gt.g,[Tt.a,i.k,i.O,Gt.c,[2,Gt.d],[8,null],[2,h.b],D.b],{menu:[0,"menu"]},null),(t()(),i.qb(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,S,C)),i.pb(4,9158656,null,0,O.b,[i.k,O.d,[8,null],[2,O.a]],null,null),(t()(),i.Fb(-1,0,["more_vert"])),(t()(),i.fb(0,null,null,0))],function(t,e){t(e,2,0,i.zb(e.parent,20)),t(e,4,0)},function(t,e){t(e,0,0,i.zb(e,1).disabled||null,"NoopAnimations"===i.zb(e,1)._animationMode,i.zb(e,2).menuOpen||null),t(e,3,0,i.zb(e,4).inline,"primary"!==i.zb(e,4).color&&"accent"!==i.zb(e,4).color&&"warn"!==i.zb(e,4).color)})}function xe(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,43,"div",[["class","mat-elevation-z4"],["fxLayout",""],["style","border: 3px solid #fa4f4f; background-color: white; min-width: 824px; min-height: 510px; height: 80%; width: 80%;"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),(t()(),i.qb(2,0,null,null,8,"div",[["fxFlex",""],["fxLayout",""],["fxLayoutAlign","center center"],["style","position: relative;\n                   box-shadow: inset 0 0 4px 1px rgba(0,0,0,.2), inset 0 0 5px 2px rgba(0,0,0,.14), inset 0 0 10px 1px rgba(0,0,0,.12);"]],null,null,null,null,null)),i.pb(3,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),i.pb(4,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(5,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(6,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.fb(16777216,null,null,1,null,ve)),i.pb(8,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,ge)),i.pb(10,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.qb(11,0,null,null,32,"div",[["fxLayout","column"],["fxLayoutAlign","end"],["style","border-left: 1px solid #fa4f4f; min-width: 220px;"]],null,null,null,null,null)),i.pb(12,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(13,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.qb(14,0,null,null,18,"div",[["fxLayout","column"],["fxLayoutAlign","end"],["style","height: 100px; min-height: 100px; max-height: 100px; background-color: #fa4f4f; color: white; position: relative;"]],null,null,null,null,null)),i.pb(15,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(16,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),i.fb(16777216,null,null,1,null,we)),i.pb(18,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(19,0,null,null,8,"mat-menu",[["xPosition","before"]],null,null,null,Ut,Ft)),i.pb(20,1294336,[["menu",4]],2,Gt.h,[i.k,i.x,Gt.a],{xPosition:[0,"xPosition"]},null),i.Db(603979776,1,{items:1}),i.Db(603979776,2,{lazyContent:0}),i.Cb(2048,null,Gt.d,null,[Gt.h]),i.Cb(2048,null,Gt.b,null,[Gt.d]),(t()(),i.qb(25,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var r=!0,o=t.component;return"click"===e&&(r=!1!==i.zb(t,26)._checkDisabled(n)&&r),"mouseenter"===e&&(r=!1!==i.zb(t,26)._handleMouseEnter()&&r),"click"===e&&(r=!1!==o.toggleDebug.emit()&&r),r},Bt,Vt)),i.pb(26,180224,[[1,4]],0,Gt.e,[i.k,l.c,D.b,[2,Gt.b]],null,null),(t()(),i.Fb(-1,0,["Toggle Debug UI"])),(t()(),i.qb(28,0,null,null,1,"h2",[["class","mat-headline"],["style","margin-left: 16px;"]],null,null,null,null,null)),(t()(),i.Fb(29,null,[" "," "])),(t()(),i.qb(30,0,null,null,2,"em",[],null,null,null,null,null)),(t()(),i.qb(31,0,null,null,1,"small",[["style","position: absolute; bottom: 48px; left: 14px;"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Now playing..."])),(t()(),i.qb(33,0,null,null,1,"et-player-list",[["style","margin: 0 12px;"]],null,null,null,ce,se)),i.pb(34,49152,null,0,le,[],{players:[0,"players"],canPlayerMakeMove:[1,"canPlayerMakeMove"],playerID:[2,"playerID"],gameover:[3,"gameover"]},null),(t()(),i.qb(35,0,null,null,1,"span",[["fxFlex",""]],null,null,null,null,null)),i.pb(36,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(37,0,null,null,6,"div",[["fxFlex","none"],["fxLayout","column"],["fxLayoutGap","8px"],["style","margin: 12px"]],null,null,null,null,null)),i.pb(38,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(39,1720320,null,0,p.d,[i.k,i.x,h.b,u.i,[2,p.j],u.f],{fxLayoutGap:[0,"fxLayoutGap"]},null),i.pb(40,671744,null,0,p.a,[i.k,u.i,u.e,p.h,u.f],{fxFlex:[0,"fxFlex"]},null),(t()(),i.qb(41,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.leave.emit()&&r),r},P.d,P.b)),i.pb(42,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),(t()(),i.Fb(-1,0,["Leave"]))],function(t,e){var n=e.component;t(e,1,0,""),t(e,3,0,n.isRoomReady),t(e,4,0,""),t(e,5,0,"center center"),t(e,6,0,""),t(e,8,0,!0),t(e,10,0,!1),t(e,12,0,"column"),t(e,13,0,"end"),t(e,15,0,"column"),t(e,16,0,"end"),t(e,18,0,n.debug),t(e,20,0,"before"),t(e,34,0,n.players,n.canPlayerMakeMove,n.playerID,null==n.gameState?null:n.gameState.ctx.gameover),t(e,36,0,""),t(e,38,0,"column"),t(e,39,0,"8px"),t(e,40,0,"none")},function(t,e){var n=e.component;t(e,25,0,i.zb(e,26).role,i.zb(e,26)._highlighted,i.zb(e,26)._triggersSubmenu,i.zb(e,26)._getTabIndex(),i.zb(e,26).disabled.toString(),i.zb(e,26).disabled||null),t(e,29,0,n.game.name),t(e,41,0,i.zb(e,42).disabled||null,"NoopAnimations"===i.zb(e,42)._animationMode)})}var _e=n("BV1i"),Oe=i.ob({encapsulation:2,styles:[],data:{}});function Ie(t){return i.Gb(2,[i.yb(null,0)],null,null)}var ke=i.ob({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"none",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{"box-shadow":"none",visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function Ce(t){return i.Gb(2,[(t()(),i.qb(0,0,null,null,1,"div",[["class","mat-drawer-inner-container"]],null,null,null,null,null)),i.yb(null,0)],null,null)}var Se=i.ob({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}@media (-ms-high-contrast:active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media (-ms-high-contrast:active){.mat-drawer.mat-drawer-end,[dir=rtl] .mat-drawer{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}"],data:{}});function Pe(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component._onBackdropClicked()&&r),r},null,null))],null,function(t,e){t(e,0,0,e.component._isShowingBackdrop())})}function Ae(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,2,"mat-drawer-content",[["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,Ie,Oe)),i.pb(1,1294336,[[1,4]],0,_e.d,[i.h,_e.c,i.k,zt.b,i.x],null,null),i.yb(0,2)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,i.zb(e,1)._container._contentMargins.left,i.zb(e,1)._container._contentMargins.right)})}function De(t){return i.Gb(2,[i.Db(671088640,1,{_userContent:0}),(t()(),i.fb(16777216,null,null,1,null,Pe)),i.pb(2,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null),i.yb(null,0),i.yb(null,1),(t()(),i.fb(16777216,null,null,1,null,Ae)),i.pb(6,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.hasBackdrop),t(e,6,0,!n._content)},null)}class Ee{constructor(){this.close=new i.m,this.step=new i.m}}var je=i.ob({encapsulation:0,styles:[[""]],data:{}});function Me(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,8,"mat-toolbar",[["class","mat-toolbar"],["color","primary"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,R,N)),i.pb(1,4243456,null,1,j.a,[i.k,M.a,l.c],{color:[0,"color"]},null),i.Db(603979776,1,{_toolbarRows:1}),(t()(),i.qb(3,0,null,0,4,"button",[["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close.emit()&&r),r},P.d,P.b)),i.pb(4,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),(t()(),i.qb(5,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,S,C)),i.pb(6,9158656,null,0,O.b,[i.k,O.d,[8,null],[2,O.a]],null,null),(t()(),i.Fb(-1,0,["close"])),(t()(),i.Fb(-1,0,[" Debug Panel\n"])),(t()(),i.qb(9,0,null,null,4,"div",[["fxLayout","column"],["style","padding: 16px;"]],null,null,null,null,null)),i.pb(10,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),(t()(),i.qb(11,0,null,null,2,"button",[["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.step.emit()&&r),r},P.d,P.b)),i.pb(12,180224,null,0,A.b,[i.k,D.b,[2,E.a]],null,null),(t()(),i.Fb(-1,0,["auto step"]))],function(t,e){t(e,1,0,"primary"),t(e,6,0),t(e,10,0,"column")},function(t,e){t(e,0,0,i.zb(e,1)._toolbarRows.length>0,0===i.zb(e,1)._toolbarRows.length),t(e,3,0,i.zb(e,4).disabled||null,"NoopAnimations"===i.zb(e,4)._animationMode),t(e,5,0,i.zb(e,6).inline,"primary"!==i.zb(e,6).color&&"accent"!==i.zb(e,6).color&&"warn"!==i.zb(e,6).color),t(e,11,0,i.zb(e,12).disabled||null,"NoopAnimations"===i.zb(e,12)._animationMode)})}var Ne=n("ANjH");const Re="MAKE_MOVE",Ge="GAME_EVENT",Te="RESET",Le="SYNC",ze="UPDATE",Fe=(t,e,n,r)=>({type:Re,payload:{type:t,args:e,playerID:n,credentials:r}}),qe=(t,e,n,r)=>({type:Ge,payload:{type:t,args:e,playerID:n,credentials:r}}),Ue=(t,e,n,r)=>({type:Ge,payload:{type:t,args:e,playerID:n,credentials:r},automatic:!0}),Ve=(t,e)=>({type:Le,state:t,log:e,clientOnly:!0}),Be=(t,e)=>({type:ze,state:t,deltalog:e,clientOnly:!0}),$e=t=>({type:Te,state:t,clientOnly:!0}),We=()=>({type:"UNDO"}),Ye=()=>({type:"REDO"}),He=()=>{};class Ke{constructor({store:t,gameID:e,playerID:n,gameName:r,numPlayers:i,server:o}={}){this.server=o,this.store=t,this.gameName=r||"default",this.gameID=e||"default",this.playerID=n||null,this.numPlayers=i||2,this.gameID=this.gameName+":"+this.gameID,this.isConnected=!1,this.callback=(()=>{})}onAction(t,e){this.server.send({msgType:"update",action:e,_stateID:t._stateID,gameID:this.gameID,playerID:this.playerID})}connect(){this.server.onMessage.add(t=>{switch(t.msgType){case"update":const e=this.store.getState();if(t.gameID==this.gameID&&t.state._stateID>=e._stateID){const e=Be(t.state,t.deltalog);this.store.dispatch(e)}break;case"sync":if(t.gameID==this.gameID){const e=Ve(t.state,t.log);this.store.dispatch(e)}}}),this.server.send({msgType:"sync",gameID:this.gameID,playerID:this.playerID})}subscribe(t){this.callback=t}updateGameID(t){this.gameID=this.gameName+":"+t;const e=$e(null);this.store.dispatch(e)}updatePlayerID(t){this.playerID=t;const e=$e(null);this.store.dispatch(e)}}class Je{constructor(){this.games=new Map}connect(){}set(t,e){return this.games.set(t,e)}get(t){return this.games.get(t)}has(t){return this.games.has(t)}remove(t){this.games.has(t)&&this.games.delete(t)}list(){return[...this.games.keys()]}}var Xe=n("bQHL");function Qe(t){const e={},n=({type:t,playerID:n,args:r})=>{const i=e[n];void 0!==i&&i.apply(null,[t,...r])},r=new Xe.Master(t,new Je,{send:n,sendAll:t=>{for(const r in e){const{type:e,args:i}=t(r);n({type:e,playerID:r,args:i})}}},!1);return r.executeSynchronously=!0,r.connect=((t,n,r)=>{e[n]=r}),r}class Ze{constructor({master:t,store:e,gameID:n,playerID:r,gameName:i,numPlayers:o}){this.master=t,this.store=e,this.gameName=i||"default",this.gameID=n||"default",this.playerID=r||null,this.numPlayers=o||2,this.gameID=this.gameName+":"+this.gameID,this.isConnected=!0}onUpdate(t,e,n){const r=this.store.getState();if(t==this.gameID&&e._stateID>=r._stateID){const t=Be(e,n);this.store.dispatch(t)}}onSync(t,e,n){if(t==this.gameID){const t=Ve(e,n);this.store.dispatch(t)}}onAction(t,e){this.master.onUpdate(e,t._stateID,this.gameID,this.playerID)}connect(){this.master.connect(this.gameID,this.playerID,(t,...e)=>{"sync"==t&&this.onSync.apply(this,e),"update"==t&&this.onUpdate.apply(this,e)}),this.master.onSync(this.gameID,this.playerID,this.numPlayers)}subscribe(){}updateGameID(t){this.gameID=this.gameName+":"+t;const e=$e(null);this.store.dispatch(e),this.master.onSync(this.gameID,this.playerID,this.numPlayers)}updatePlayerID(t){this.playerID=t;const e=$e(null);this.store.dispatch(e),this.master.onSync(this.gameID,this.playerID,this.numPlayers)}}let tn=null;function en(t,e,n,i,o,a){return e.reduce((e,l)=>(e[l]=function(...e){let s=i;a||null!=i||(s=n.getState().ctx.currentPlayer),n.dispatch(r[t](l,e,s,o))},e),{})}const nn=en.bind(null,"gameEvent"),rn=en.bind(null,"makeMove");class on{constructor({game:t,ai:e,numPlayers:n,multiplayer:r,gameID:i,playerID:o,credentials:a,enhancer:l}){if(this.game=t,this.playerID=o,this.gameID=i,this.credentials=a,this.multiplayer=r,this.subscribeCallback=(()=>{}),this.reducer=Object(et.CreateGameReducer)({game:t,numPlayers:n,multiplayer:r}),void 0!==e&&void 0===r){const n=new e.bot({game:t,enumerate:e.enumerate});this.step=(()=>tt.__awaiter(this,void 0,void 0,function*(){const t=this.store.getState(),e=t.ctx.actionPlayers[0],{action:r,metadata:i}=yield n.play(t,e);return r&&(r.payload.metadata=i,this.store.dispatch(r)),r}))}let s=null;void 0===r&&(s=Object(et.InitializeGame)({game:t,numPlayers:n})),this.reset=(()=>{this.store.dispatch($e(s))}),this.undo=(()=>{this.store.dispatch(We())}),this.redo=(()=>{this.store.dispatch(Ye())}),this.store=null,this.log=[];const u=t=>e=>n=>{const r=e(n),i=t.getState();switch(n.type){case Re:case Ge:this.log=[...this.log,...i.deltalog];break;case Te:this.log=[];break;case ze:{let t=-1;this.log.length>0&&(t=this.log[this.log.length-1]._stateID);let e=n.deltalog||[];e=e.filter(e=>e._stateID>t),this.log=[...this.log,...e];break}case Le:this.log=n.log||[]}return r},c=t=>e=>n=>{const r=t.getState(),i=e(n);return 1!=n.clientOnly&&this.transport.onAction(r,n),i},f=()=>t=>e=>{const n=t(e);return this.subscribeCallback(),n};l=void 0!==l?Object(Ne.compose)(Object(Ne.applyMiddleware)(f,c,u),l):Object(Ne.applyMiddleware)(f,c,u),this.store=Object(Ne.createStore)(this.reducer,s,l),this.transport={isConnected:!0,onAction:()=>{},subscribe:()=>{},connect:()=>{},updateGameID:()=>{},updatePlayerID:()=>{}},void 0!==r&&(!0===r&&(r={server:""}),!0===r.local?(null!==tn&&tn.game===t||(tn=new Qe(t)),this.transport=new Ze({master:tn,store:this.store,gameID:i,playerID:o,gameName:t.name,numPlayers:n})):void 0!==r.server?this.transport=new Ke({store:this.store,gameID:i,playerID:o,gameName:t.name,numPlayers:n,server:r.server}):void 0!==r.transport?this.transport=r.transport:He("ERROR:","invalid multiplayer spec")),this.createDispatchers()}subscribe(t){const e=()=>t(this.getState());this.transport.subscribe(e),this.subscribeCallback=e}getState(){const t=this.store.getState();if(null===t)return t;let e=!0;const n=this.game.flow.canPlayerMakeMove(t.G,t.ctx,this.playerID);this.multiplayer&&!n&&(e=!1),this.multiplayer||null==this.playerID||n||(e=!1),void 0!==t.ctx.gameover&&(e=!1);const r=this.game.playerView(t.G,t.ctx,this.playerID);let i=Object.assign({},t,{isActive:e,G:r,log:this.log});return Object.assign({},i,{isConnected:this.transport.isConnected})}connect(){this.transport.connect()}createDispatchers(){this.moves=rn(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=nn(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t)}updateGameID(t){this.gameID=t,this.createDispatchers(),this.transport.updateGameID(t)}updateCredentials(t){this.credentials=t,this.createDispatchers()}}var an=n("1mXj"),ln=n.n(an);class sn{constructor(){this.gameID="default",this.playerID=null,this.credentials=null,this.debug=!0,this.leave=new i.m,this.playAgain=(()=>{this.client.reset()}),this.getBoardInputs=this.getBoardInputs.bind(this)}ngOnChanges(t){t.isRoomReady&&t.isRoomReady.currentValue&&(this.client=new on({game:this.game,ai:this.ai,numPlayers:this.numPlayers,multiplayer:this.multiplayer,gameID:this.gameID,playerID:this.playerID,credentials:this.credentials,enhancer:this.ai?Object(Ne.applyMiddleware)(ln.a,t=>e=>n=>{e(n),"1"===t.getState().ctx.currentPlayer&&setTimeout(()=>{this.client.step()},300)}):Object(Ne.applyMiddleware)(ln.a)}),this.client.connect()),this.client&&(t.gameID&&t.gameID.currentValue!==t.gameID.previousValue&&this.client.updateGameID(t.gameID.currentValue),t.playerID&&t.playerID.currentValue!==t.playerID.previousValue&&this.client.updatePlayerID(t.playerID.currentValue),t.credentials&&t.credentials.currentValue!==t.credentials.previousValue&&this.client.updateCredentials(t.credentials.currentValue))}getBoardInputs(){const t=this.client.getState();return Object.assign({},t,{moves:this.client.moves,events:this.client.events,gameID:this.gameID,playerID:this.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo})}}var un=i.ob({encapsulation:2,styles:[],data:{animation:[{type:7,name:"fadeInUp",definitions:[{type:1,expr:":enter",animation:{type:10,animation:{type:8,animation:{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:1},offset:null}]},timings:"{{ timing }}s {{ delay }}s"},options:{params:{timing:1,delay:0,a:"100%",b:0}}},options:{params:{timing:"0.3",a:"12px"}}},options:null}],options:{}}]}});function cn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"et-room",[],[[24,"@fadeInUp",0]],[[null,"leave"],[null,"toggleDebug"],[null,"playAgain"]],function(t,e,n){var r=!0,o=t.component;return"leave"===e&&(r=!1!==o.leave.emit()&&r),"toggleDebug"===e&&(r=!1!==i.zb(t.parent,5).toggle()&&r),"playAgain"===e&&(r=!1!==o.playAgain()&&r),r},xe,pe)),i.pb(1,49152,null,0,fe,[],{gameState:[0,"gameState"],game:[1,"game"],isRoomReady:[2,"isRoomReady"],playerID:[3,"playerID"],players:[4,"players"],board:[5,"board"],getBoardInputs:[6,"getBoardInputs"],debug:[7,"debug"]},{leave:"leave",toggleDebug:"toggleDebug",playAgain:"playAgain"})],function(t,e){var n=e.component;t(e,1,0,null==n.client?null:n.client.getState(),n.game,n.isRoomReady,n.playerID,n.players,n.board,n.getBoardInputs,n.debug)},function(t,e){t(e,0,0,void 0)})}function fn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,15,"mat-drawer-container",[["class","mat-drawer-container"],["style","height: 100%; background-color: transparent;"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,De,Se)),i.pb(1,1490944,null,2,_e.c,[[2,h.b],i.k,i.x,i.h,zt.e,_e.a,[2,E.a]],null,null),i.Db(603979776,1,{_drawers:1}),i.Db(603979776,2,{_content:0}),(t()(),i.qb(4,0,null,0,3,"mat-drawer",[["class","mat-elevation-z4 mat-drawer"],["mode","side"],["position","end"],["style","width: 200px;"],["tabIndex","-1"]],[[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[40,"@transform",0]],[["component","@transform.start"],["component","@transform.done"]],function(t,e,n){var r=!0;return"component:@transform.start"===e&&(r=!1!==i.zb(t,5)._animationStartListener(n)&&r),"component:@transform.done"===e&&(r=!1!==i.zb(t,5)._animationDoneListener(n)&&r),r},Ce,ke)),i.pb(5,3325952,[[1,4],["drawer",4]],0,_e.b,[i.k,D.c,D.b,M.a,i.x,[2,l.c]],{position:[0,"position"],mode:[1,"mode"]},null),(t()(),i.qb(6,0,null,0,1,"et-debug",[],null,[[null,"close"],[null,"step"]],function(t,e,n){var r=!0,o=t.component;return"close"===e&&(r=!1!==i.zb(t,5).close()&&r),"step"===e&&(r=!1!==o.client.step()&&r),r},Me,je)),i.pb(7,49152,null,0,Ee,[],null,{close:"close",step:"step"}),(t()(),i.qb(8,0,null,1,7,"mat-drawer-content",[["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,Ie,Oe)),i.pb(9,1294336,[[2,4]],0,_e.d,[i.h,_e.c,i.k,zt.b,i.x],null,null),(t()(),i.qb(10,0,null,0,5,"div",[["fxFlexFill",""],["fxLayout",""],["fxLayoutAlign","center center"]],null,null,null,null,null)),i.pb(11,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(12,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(13,671744,null,0,p.e,[i.k,u.i,p.f,u.f],null,null),(t()(),i.fb(16777216,null,null,1,null,cn)),i.pb(15,16384,null,0,l.k,[i.O,i.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0),t(e,5,0,"end","side"),t(e,9,0),t(e,11,0,""),t(e,12,0,"center center"),t(e,15,0,n.game)},function(t,e){t(e,0,0,i.zb(e,1)._backdropOverride),t(e,4,0,null,"end"===i.zb(e,5).position,"over"===i.zb(e,5).mode,"push"===i.zb(e,5).mode,"side"===i.zb(e,5).mode,i.zb(e,5)._animationState),t(e,8,0,i.zb(e,9)._container._contentMargins.left,i.zb(e,9)._container._contentMargins.right)})}var pn=n("lJxs");const hn={"tic-tac-toe":m};function dn(t){return hn[t]}class mn{}class yn{constructor(t,e,n){this.route=t,this.router=e,this.colyseus=n,this.playAgain=(()=>{this.room.onLeave.addOnce(()=>tt.__awaiter(this,void 0,void 0,function*(){const t=yield this.colyseus.createGameRoom(this.Game.name);delete this.room,this.router.navigate(["..",t.id],{relativeTo:this.route})})),this.room.leave()})}ngOnInit(){this.route.paramMap.pipe(Object(pn.a)(t=>[this.colyseus.getConnectedRoom(t.get("roomId")),t.get("gameName")])).subscribe(([t,e])=>{if(t){this.room&&this.room.leave(),this.room=t;const n=ot(e);n&&(this.Game=n.Game,this.BoardComponent=dn(e))}else this.router.navigate(["../../.."],{relativeTo:this.route})})}leave(){this.router.navigate(["../../.."],{relativeTo:this.route})}ngOnDestroy(){this.room&&this.room.leave()}getPlayerId(){if(this.room&&this.room.state.players){const t=this.room.state.players.find(t=>t.id===this.room.sessionId);return t&&t.playerID}}}var bn=i.ob({encapsulation:2,styles:[],data:{}});function vn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,4,"div",[["class","mat-headline"],["fxFlexFill",""],["fxLayout",""],["fxLayoutAlign","center center"],["style","color: white;"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(3,671744,null,0,p.e,[i.k,u.i,p.f,u.f],null,null),(t()(),i.Fb(-1,null,[" Game Not Found "]))],function(t,e){t(e,1,0,""),t(e,2,0,"center center")},null)}function gn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,6,null,null,null,null,null,null,null)),i.pb(1,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.fb(16777216,null,null,1,null,vn)),i.pb(3,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.qb(4,0,null,null,2,"et-client",[],null,[[null,"leave"]],function(t,e,n){var r=!0;return"leave"===e&&(r=!1!==t.component.leave()&&r),r},fn,un)),i.pb(5,573440,null,0,sn,[],{game:[0,"game"],board:[1,"board"],multiplayer:[2,"multiplayer"],gameID:[3,"gameID"],playerID:[4,"playerID"],isRoomReady:[5,"isRoomReady"],players:[6,"players"],debug:[7,"debug"],playAgain:[8,"playAgain"]},{leave:"leave"}),i.Bb(6,{server:0})],function(t,e){var n=e.component;t(e,1,0,!!n.Game),t(e,3,0,!1);var r=n.Game,i=n.BoardComponent,o=t(e,6,0,n.room);t(e,5,0,r,i,o,null==n.room?null:n.room.id,n.getPlayerId(),null==n.room?null:n.room.state.isReady,null==n.room?null:n.room.state.players,!1,n.playAgain)},null)}function wn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,gn,bn)),i.pb(1,245760,null,0,yn,[G.a,G.k,V],null,null)],function(t,e){t(e,1,0)},null)}var xn=i.mb("ng-component",yn,wn,{},{},[]);const _n={state:{isReady:!0,players:[{playerID:"0",profile:{nickname:"Player 1",picture:"https://api.adorable.io/avatars/162/itsME@adorable.png"},color:"rgb(102,127,203)"},{playerID:"1",profile:{nickname:"ai",picture:"https://api.adorable.io/avatars/162/itsME2@adorable.png"},color:"rgb(234, 123, 123)"}]}};class On{constructor(t,e){this.route=t,this.router=e,this.room=_n,t.paramMap.subscribe(t=>{const e=t.get("gameName"),n=ot(e);n&&(this.Game=n.Game,this.ai=n.ai,this.BoardComponent=dn(e))})}leave(){this.router.navigate(["../.."],{relativeTo:this.route})}}var In=i.ob({encapsulation:2,styles:[],data:{}});function kn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,4,"div",[["class","mat-headline"],["fxFlexFill",""],["fxLayout",""],["fxLayoutAlign","center center"],["style","color: white;"]],null,null,null,null,null)),i.pb(1,671744,null,0,p.c,[i.k,u.i,[2,p.k],u.f],{fxLayout:[0,"fxLayout"]},null),i.pb(2,671744,null,0,p.b,[i.k,u.i,[2,p.i],u.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),i.pb(3,671744,null,0,p.e,[i.k,u.i,p.f,u.f],null,null),(t()(),i.Fb(-1,null,[" Game Not Found "]))],function(t,e){t(e,1,0,""),t(e,2,0,"center center")},null)}function Cn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"et-client",[["gameID","gameID"],["playerID","0"]],null,[[null,"leave"]],function(t,e,n){var r=!0;return"leave"===e&&(r=!1!==t.component.leave()&&r),r},fn,un)),i.pb(1,573440,null,0,sn,[],{game:[0,"game"],board:[1,"board"],ai:[2,"ai"],gameID:[3,"gameID"],playerID:[4,"playerID"],isRoomReady:[5,"isRoomReady"],players:[6,"players"]},{leave:"leave"})],function(t,e){var n=e.component;t(e,1,0,n.Game,n.BoardComponent,n.ai,"gameID","0",n.room.state.isReady,n.room.state.players)},null)}function Sn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,5,null,null,null,null,null,null,null)),i.pb(1,16384,null,0,l.o,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i.fb(16777216,null,null,1,null,kn)),i.pb(3,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i.fb(16777216,null,null,1,null,Cn)),i.pb(5,278528,null,0,l.p,[i.O,i.L,l.o],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){t(e,1,0,!!e.component.Game),t(e,3,0,!1),t(e,5,0,!0)},null)}function Pn(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ng-component",[],null,null,null,Sn,In)),i.pb(1,49152,null,0,On,[G.a,G.k],null,null)],null,null)}var An=i.mb("ng-component",On,Pn,{},{},[]),Dn=n("igqZ"),En=n("7QIX"),jn=n("8P0U"),Mn=n("Nhcz"),Nn=n("u9T3"),Rn=n("vvyD");n.d(e,"MainModuleNgFactory",function(){return Gn});var Gn=i.nb(o,[],function(t){return i.wb([i.xb(512,i.j,i.ab,[[8,[a.a,_,Z,ft,xn,An]],[3,i.j],i.v]),i.xb(4608,l.m,l.l,[i.s,[2,l.A]]),i.xb(4608,Tt.a,Tt.a,[Tt.g,Tt.c,i.j,Tt.f,Tt.d,i.p,i.x,l.c,h.b,[2,l.f]]),i.xb(5120,Tt.h,Tt.i,[Tt.a]),i.xb(5120,Gt.c,Gt.j,[Tt.a]),i.xb(5120,i.b,function(t,e){return[u.j(t,e)]},[l.c,i.z]),i.xb(4608,Ct,Ct,[i.r,i.j]),i.xb(5120,St,Et,[]),i.xb(4608,Pt,Pt,[i.p]),i.xb(1073742336,l.b,l.b,[]),i.xb(1073742336,G.m,G.m,[[2,G.r],[2,G.k]]),i.xb(1073742336,h.a,h.a,[]),i.xb(1073742336,I.h,I.h,[[2,I.b],[2,k.f]]),i.xb(1073742336,Wt.a,Wt.a,[]),i.xb(1073742336,Dn.a,Dn.a,[]),i.xb(1073742336,M.b,M.b,[]),i.xb(1073742336,I.r,I.r,[]),i.xb(1073742336,A.c,A.c,[]),i.xb(1073742336,O.c,O.c,[]),i.xb(1073742336,En.a,En.a,[]),i.xb(1073742336,j.b,j.b,[]),i.xb(1073742336,zt.c,zt.c,[]),i.xb(1073742336,_e.h,_e.h,[]),i.xb(1073742336,I.j,I.j,[]),i.xb(1073742336,I.p,I.p,[]),i.xb(1073742336,$t.d,$t.d,[]),i.xb(1073742336,jn.a,jn.a,[]),i.xb(1073742336,Lt.b,Lt.b,[]),i.xb(1073742336,Tt.e,Tt.e,[]),i.xb(1073742336,Gt.i,Gt.i,[]),i.xb(1073742336,Gt.f,Gt.f,[]),i.xb(1073742336,u.c,u.c,[]),i.xb(1073742336,p.g,p.g,[]),i.xb(1073742336,s.c,s.c,[]),i.xb(1073742336,Mn.a,Mn.a,[]),i.xb(1073742336,Nn.a,Nn.a,[[2,u.g],i.z]),i.xb(1073742336,Rn.a,Rn.a,[]),i.xb(1073742336,f,f,[]),i.xb(1073742336,mn,mn,[]),i.xb(1073742336,ht,ht,[]),i.xb(1073742336,jt,jt,[]),i.xb(1073742336,o,o,[]),i.xb(1024,G.i,function(){return[[{path:"",component:B,children:[{path:"",component:at,pathMatch:"full"},{path:":gameName",children:[{path:"rooms/:roomId",component:yn},{path:"singleplayer",component:On}]}]}]]},[]),i.xb(256,yt,At,[])])})},oLdw:function(t,e,n){"use strict";function r(t,e){var n=t.slice();return n.push(e),n}function i(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i);return r}Object.defineProperty(e,"__esModule",{value:!0}),e.compare=function(t,e){var n=[];return function t(e,n,o,a){for(var l=i(n),s=i(e),u=!1,c=s.length-1;c>=0;c--){var f=e[h=s[c]];if(!n.hasOwnProperty(h)||void 0===n[h]&&void 0!==f&&!1===Array.isArray(n))o.push({operation:"remove",path:r(a,h)}),u=!0;else{var p=n[h];"object"==typeof f&&null!=f&&"object"==typeof p&&null!=p?t(f,p,o,r(a,h)):f!==p&&o.push({operation:"replace",path:r(a,h),value:p,previousValue:f})}}if(u||l.length!=s.length)for(c=l.length-1;c>=0;c--){var h;if(!e.hasOwnProperty(h=l[c])&&void 0!==n[h]){p=n[h];var d=r(a,h);"object"==typeof p&&null!=p&&t({},p,o,d),o.push({operation:"add",path:d,value:p})}}}(t,e,n,[]),n}},"uwJ/":function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?t.setUint8(e++,r):r<2048?(t.setUint8(e++,192|r>>6),t.setUint8(e++,128|63&r)):r<55296||r>=57344?(t.setUint8(e++,224|r>>12),t.setUint8(e++,128|r>>6&63),t.setUint8(e++,128|63&r)):(r=65536+((1023&r)<<10|1023&n.charCodeAt(++i)),t.setUint8(e++,240|r>>18),t.setUint8(e++,128|r>>12&63),t.setUint8(e++,128|r>>6&63),t.setUint8(e++,128|63&r))}t.exports=function(t){var e=[],n=[],i=function t(e,n,r){var i=typeof r,o=0,a=0,l=0,s=0,u=0,c=0;if("string"===i){if((u=function(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(r))<32)e.push(160|u),c=1;else if(u<256)e.push(217,u),c=2;else if(u<65536)e.push(218,u>>8,u),c=3;else{if(!(u<4294967296))throw new Error("String too long");e.push(219,u>>24,u>>16,u>>8,u),c=5}return n.push({_str:r,_length:u,_offset:e.length}),c+u}if("number"===i)return Math.floor(r)===r&&isFinite(r)?r>=0?r<128?(e.push(r),1):r<256?(e.push(204,r),2):r<65536?(e.push(205,r>>8,r),3):r<4294967296?(e.push(206,r>>24,r>>16,r>>8,r),5):(l=r/Math.pow(2,32)>>0,e.push(207,l>>24,l>>16,l>>8,l,(s=r>>>0)>>24,s>>16,s>>8,s),9):r>=-32?(e.push(r),1):r>=-128?(e.push(208,r),2):r>=-32768?(e.push(209,r>>8,r),3):r>=-2147483648?(e.push(210,r>>24,r>>16,r>>8,r),5):(l=Math.floor(r/Math.pow(2,32)),e.push(211,l>>24,l>>16,l>>8,l,(s=r>>>0)>>24,s>>16,s>>8,s),9):(e.push(203),n.push({_float:r,_length:8,_offset:e.length}),9);if("object"===i){if(null===r)return e.push(192),1;if(Array.isArray(r)){if((u=r.length)<16)e.push(144|u),c=1;else if(u<65536)e.push(220,u>>8,u),c=3;else{if(!(u<4294967296))throw new Error("Array too large");e.push(221,u>>24,u>>16,u>>8,u),c=5}for(o=0;o<u;o++)c+=t(e,n,r[o]);return c}if(r instanceof Date){var f=r.getTime();return l=Math.floor(f/Math.pow(2,32)),e.push(215,0,l>>24,l>>16,l>>8,l,(s=f>>>0)>>24,s>>16,s>>8,s),10}if(r instanceof ArrayBuffer){if((u=r.byteLength)<256)e.push(196,u),c=2;else if(u<65536)e.push(197,u>>8,u),c=3;else{if(!(u<4294967296))throw new Error("Buffer too large");e.push(198,u>>24,u>>16,u>>8,u),c=5}return n.push({_bin:r,_length:u,_offset:e.length}),c+u}if("function"==typeof r.toJSON)return t(e,n,r.toJSON());var p=[],h="",d=Object.keys(r);for(o=0,a=d.length;o<a;o++)"function"!=typeof r[h=d[o]]&&p.push(h);if((u=p.length)<16)e.push(128|u),c=1;else if(u<65536)e.push(222,u>>8,u),c=3;else{if(!(u<4294967296))throw new Error("Object too large");e.push(223,u>>24,u>>16,u>>8,u),c=5}for(o=0;o<u;o++)c+=t(e,n,h=p[o]),c+=t(e,n,r[h]);return c}if("boolean"===i)return e.push(r?195:194),1;if("undefined"===i)return e.push(212,0,0),3;throw new Error("Could not encode")}(e,n,t),o=new ArrayBuffer(i),a=new DataView(o),l=0,s=0,u=-1;n.length>0&&(u=n[0]._offset);for(var c,f=0,p=0,h=0,d=e.length;h<d;h++)if(a.setUint8(s+h,e[h]),h+1===u){if(f=(c=n[l])._length,p=s+u,c._bin)for(var m=new Uint8Array(c._bin),y=0;y<f;y++)a.setUint8(p+y,m[y]);else c._str?r(a,p,c._str):void 0!==c._float&&a.setFloat64(p,c._float);s+=f,n[++l]&&(u=n[l]._offset)}return o}},woCW:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n("FYgB"),o=r(n("ckdo")),a=n("cihy"),l=n("+b4j"),s=n("zooS");e.Room=function(){function t(t,e,n){var r=this;this.onJoin=new i.Signal,this.onStateChange=new i.Signal,this.onMessage=new i.Signal,this.onError=new i.Signal,this.onLeave=new i.Signal,this.id=null,this.name=t,this.options=e,n?(this.serializer=new(l.getSerializer("schema")),this.rootSchema=n,this.serializer.state=new n):this.serializer=new(l.getSerializer("fossil-delta")),this.onLeave.add(function(){return r.removeAllListeners()})}return t.prototype.connect=function(t){var e=this;this.connection=new a.Connection(t,!1),this.connection.reconnectEnabled=!1,this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(t){return e.onLeave.dispatch(t)},this.connection.onerror=function(t){console.warn("Possible causes: room's onAuth() failed or maxClients has been reached."),e.onError.dispatch(t)},this.connection.open()},t.prototype.leave=function(t){void 0===t&&(t=!0),this.connection?t?this.connection.send([s.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.dispatch()},t.prototype.send=function(t){this.connection.send([s.Protocol.ROOM_DATA,this.id,t])},Object.defineProperty(t.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasJoined",{get:function(){return void 0!==this.sessionId},enumerable:!0,configurable:!0}),t.prototype.listen=function(t,e,n){if("schema"!==this.serializerId)return this.serializerId||console.warn("room.Listen() should be called after room.onJoin has been called (DEPRECATION WARNING)"),this.serializer.api.listen(t,e,n);console.error("'"+this.serializerId+"' serializer doesn't support .listen() method.")},t.prototype.removeListener=function(t){return this.serializer.api.removeListener(t)},t.prototype.removeAllListeners=function(){this.serializer&&this.serializer.teardown(),this.onJoin.removeAll(),this.onStateChange.removeAll(),this.onMessage.removeAll(),this.onError.removeAll(),this.onLeave.removeAll()},t.prototype.onMessageCallback=function(t){if(this.previousCode)this.previousCode===s.Protocol.ROOM_STATE?this.setState(Array.from(new Uint8Array(t.data))):this.previousCode===s.Protocol.ROOM_STATE_PATCH?this.patch(Array.from(new Uint8Array(t.data))):this.previousCode===s.Protocol.ROOM_DATA&&this.onMessage.dispatch(o.decode(t.data)),this.previousCode=void 0;else{var e=new DataView(t.data),n=e.getUint8(0);if(n===s.Protocol.JOIN_ROOM){var r=1;this.sessionId=s.utf8Read(e,r),r+=s.utf8Length(this.sessionId),this.serializerId=s.utf8Read(e,r),r+=s.utf8Length(this.serializerId);var i=l.getSerializer(this.serializerId);if(!i)throw new Error("missing serializer: "+this.serializerId);if("fossil-delta"===this.serializerId||this.rootSchema||(this.serializer=new i),e.buffer.byteLength>r&&this.serializer.handshake){var a=Array.from(new Uint8Array(e.buffer.slice(r)));this.serializer.handshake(a)}this.onJoin.dispatch()}else n===s.Protocol.JOIN_ERROR?this.onError.dispatch(s.utf8Read(e,1)):n===s.Protocol.LEAVE_ROOM?this.leave():this.previousCode=n}},t.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.dispatch(this.serializer.getState())},t.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.dispatch(this.serializer.getState())},t}()},zZ8E:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("QW+4");var r=n("ZOD7");e.Client=r.Client;var i=n("zooS");e.Protocol=i.Protocol;var o=n("woCW");e.Room=o.Room;var a=n("Y0G6");e.Auth=a.Auth,e.Platform=a.Platform;var l=n("WjO6");e.FossilDeltaSerializer=l.FossilDeltaSerializer;var s=n("LEIV");e.SchemaSerializer=s.SchemaSerializer;var u=n("+b4j");e.registerSerializer=u.registerSerializer;var c=n("ibR2");e.Schema=c.Schema,e.type=c.type,u.registerSerializer("fossil-delta",l.FossilDeltaSerializer),u.registerSerializer("schema",s.SchemaSerializer)},zooS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Protocol=function(t){return t[t.USER_ID=1]="USER_ID",t[t.JOIN_REQUEST=9]="JOIN_REQUEST",t[t.JOIN_ROOM=10]="JOIN_ROOM",t[t.JOIN_ERROR=11]="JOIN_ERROR",t[t.LEAVE_ROOM=12]="LEAVE_ROOM",t[t.ROOM_DATA=13]="ROOM_DATA",t[t.ROOM_STATE=14]="ROOM_STATE",t[t.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",t[t.ROOM_LIST=20]="ROOM_LIST",t[t.BAD_REQUEST=50]="BAD_REQUEST",t}(e.Protocol||{}),e.utf8Read=function(t,e){for(var n=t.getUint8(e++),r="",i=0,o=e,a=e+n;o<a;o++){var l=t.getUint8(o);if(0!=(128&l))if(192!=(224&l))if(224!=(240&l)){if(240!=(248&l))throw new Error("Invalid byte "+l.toString(16));(i=(7&l)<<18|(63&t.getUint8(++o))<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&l)<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0);else r+=String.fromCharCode((31&l)<<6|63&t.getUint8(++o));else r+=String.fromCharCode(l)}return r},e.utf8Length=function(t){void 0===t&&(t="");for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n+1}}}]);